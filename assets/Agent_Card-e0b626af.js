import{u as _e}from"./Data-0e2b160c.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                        */import"./el-form-item-4ed993c7.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                     */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 *//* empty css                   *//* empty css                  */import{G as xe,b as E,a as M,A as ye,c as ke,D as be,d as ge}from"./AgentSDK-f3b8d40e.js";import{d as Ee,T as Pe}from"./db-bef06366.js";import{i as De,c as Te}from"./Lib-68e63efa.js";import{d as we,r as P,x as j,o as Ve,q as S,b as N,e as l,w as a,F as L,G as Ie,p as Ue,a as s,f as u,u as V,i as H,L as A,B as K,c as f,g as I,E as F,n as he,a5 as Se,a6 as Le,k as Ne,$ as Be,X as ze,N as Me,t as Ae,W as Ye,K as Ge,Y as He,Z as Fe,l as Re,a0 as We}from"./index-a03fb73d.js";import{S as je}from"./Search-96d0cf4e.js";import"./index-d608f87e.js";import"./index-9d39963a.js";const Ke={class:"h-[850px] p-[15px]"},$e={class:"mb-[15px]"},Oe={class:"mt-[10px] ml-[10px]"},qe=N("p",{class:"ml-[10px]"},"￥",-1),Xe={class:"justify-center text-center"},ka=we({__name:"Agent_Card",setup(Ze){const i=_e(),T=P(1),_=P(60);let x=P(_.value*(T.value-1)),y=P(_.value),c=P(9),p=P(""),d=P("");const B=P("0"),e=j({CarNum:10,ExeID:"",TyCar:1,Bak:"",TPrice:0,UPrice:0}),k=j({ExePrice:{HourCar:0,DayCar:0,WeekCar:0,MonthCar:0,SeasonCar:0,HalfYearCar:0,YearCar:0,PermanentCar:0},ID:"",Title:"",Versions:"",State:!1,Notice:"",Address:"",Md5:"",Data:"",IsDK:!1,IsReg:!1,IsDbg:!1,IsBindIP:!1,IsDeviceID:!1,IsUpDate:!1,GiveTime:0,BindCount:0,SubTime:0,BindDeviceIDNum:0,LoginMod:0,BillCount:0,CarCount:0,UserCount:0,DKCount:0,BindCarType:void 0,VMPLicense:"",PayLink:""}),z=P(!1),R=P("创建卡密"),$=P("提交");Ve(async()=>{await xe(),await E(p.value,c.value,x.value,y.value,d.value,""),await M()});const O=n=>{for(let r=0;r<i.Data.ExeList.Exes.length;r++)if(i.Data.ExeList.Exes[r].ID==n){k.ID=i.Data.ExeList.Exes[r].ID,k.Title=i.Data.ExeList.Exes[r].Title,k.ExePrice=i.Data.ExeList.Exes[r].ExePrice;break}Y()},Y=()=>{var n=(i.Data.AgentInfo.UPDiscount??0)*(i.Data.AgentInfo.Discount??0);switch(e.TyCar){case 0:e.UPrice=(k.ExePrice.HourCar??0)*n,e.TPrice=e.UPrice*e.CarNum;break;case 1:e.UPrice=(k.ExePrice.DayCar??0)*n,e.TPrice=e.UPrice*e.CarNum;break;case 2:e.UPrice=(k.ExePrice.WeekCar??0)*n,e.TPrice=e.UPrice*e.CarNum;break;case 3:e.UPrice=(k.ExePrice.MonthCar??0)*n,e.TPrice=e.UPrice*e.CarNum;break;case 4:e.UPrice=(k.ExePrice.SeasonCar??0)*n,e.TPrice=e.UPrice*e.CarNum;break;case 5:e.UPrice=(k.ExePrice.HalfYearCar??0)*n,e.TPrice=e.UPrice*e.CarNum;break;case 6:e.UPrice=(k.ExePrice.YearCar??0)*n,e.TPrice=e.UPrice*e.CarNum;break;case 7:e.UPrice=(k.ExePrice.PermanentCar??0)*n,e.TPrice=e.UPrice*e.CarNum;break}B.value=e.TPrice.toFixed(2)+"￥",e.ExeID==""&&(e.UPrice=0,e.TPrice=0,B.value="0",k.ExePrice={HourCar:0,DayCar:0,WeekCar:0,MonthCar:0,SeasonCar:0,HalfYearCar:0,YearCar:0,PermanentCar:0})},q=()=>{if(e.ExeID==""){F.error("请选择对应的软件");return}ye(e.ExeID,e.CarNum,e.TyCar,e.Bak),E(p.value,c.value,x.value,y.value,d.value,""),M(),z.value=!1},X=()=>{x.value=_.value*(T.value-1),y.value=_.value,_.value<i.Data.CarList.CarNum&&E(p.value,c.value,x.value,y.value,d.value,"")},Z=()=>{x.value=_.value*(T.value-1),y.value=_.value,E(p.value,c.value,x.value,y.value,d.value,"")},J=()=>{p.value="",d.value="",c.value=9,T.value=1,_.value=60,E(p.value,c.value,0,60,d.value,"")},Q=()=>{E(p.value,c.value,x.value,y.value,d.value,"")},ee=n=>{const r=T.value,m=_.value;return n+1+(r-1)*m},ae=()=>{e.Bak="",e.ExeID="",e.CarNum=1,e.TyCar=0,e.TPrice=0,R.value="添加卡密",$.value="提交",z.value=!0},le=n=>{ke(n.Serial,!n.State),E(p.value,c.value,x.value,y.value,d.value,"")},te=n=>{be(n.Serial),E(p.value,c.value,x.value,y.value,d.value,""),M()},re=n=>{d.value=n,E(p.value,c.value,x.value,y.value,d.value,"")},ne=n=>{c.value=n,E(p.value,c.value,x.value,y.value,d.value,"")},oe=n=>{var r,m;if(!((m=(r=i.Data.ExeList)==null?void 0:r.Exes)!=null&&m.length))return"未知";for(let v=0;v<i.Data.ExeList.Exes.length;v++){const b=i.Data.ExeList.Exes[v];if((b==null?void 0:b.ID)===n)return b.Title||"未知"}return"未知"},ue=()=>{ge(d.value,p.value,c.value),E(p.value,c.value,x.value,y.value,d.value,""),M()},se=()=>{const n=T.value,r=_.value;let m=0;if(i.Data.CarList.Cars==null){F.error("当前没有卡密");return}let v="";for(let w=0;w<i.Data.CarList.Cars.length;w++)m=w+1+(n-1)*r,v=v+"序号:"+m.toString()+" 卡密:"+i.Data.CarList.Cars[w].Serial+` 
 `;const b="卡密.txt",g=document.createElement("a");g.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(v)}`),g.setAttribute("download",b),g.style.display="none",document.body.appendChild(g),g.click(),document.body.removeChild(g)},ie=n=>{Te(n),F.success("卡密复制成功")};return(n,r)=>{const m=he,v=Se,b=Le,g=Ne,w=Be,ce=ze,de=Me,pe=Ae,G=Ie,D=Ye,C=Ge,me=He,fe=Fe,U=Re,ve=We,Ce=Ue;return s(),S(L,null,[N("div",Ke,[N("div",$e,[l(G,null,{default:a(()=>[l(pe,null,{default:a(()=>[l(de,{wrap:""},{default:a(()=>[l(m,{type:"primary",onClick:ae},{default:a(()=>[u("添加卡密")]),_:1},8,["onClick"]),l(b,{modelValue:V(d),"onUpdate:modelValue":r[0]||(r[0]=t=>H(d)?d.value=t:d=t),style:{width:"160px"},placeholder:"软件筛选",onChange:re},{default:a(()=>{var t;return[l(v,{key:"全部软件",label:"全部软件",value:""}),(s(!0),S(L,null,A((t=V(i).Data.ExeList)==null?void 0:t.Exes,h=>(s(),f(v,{key:h.ID,label:h.Title,value:h.ID},null,8,["label","value"]))),128))]}),_:1},8,["modelValue","onChange"]),l(b,{modelValue:V(c),"onUpdate:modelValue":r[1]||(r[1]=t=>H(c)?c.value=t:c=t),style:{width:"130px"},placeholder:"卡密筛选",onChange:ne},{default:a(()=>[(s(!0),S(L,null,A(Ee,t=>(s(),f(v,{key:t.Title,label:t.Title,value:t==null?void 0:t.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l(g,{modelValue:V(p),"onUpdate:modelValue":r[2]||(r[2]=t=>H(p)?p.value=t:p=t),style:{width:"350px"},class:"m-2 ml-[30px]",placeholder:"请输入要查询的卡密/备注/","prefix-icon":V(je)},null,8,["modelValue","prefix-icon"]),l(m,{type:"primary",onClick:Q},{default:a(()=>[u("查询")]),_:1},8,["onClick"]),l(w,{class:"box-item",effect:"dark",content:"重置查询条件",placement:"top-start"},{default:a(()=>[l(m,{type:"primary",onClick:J},{default:a(()=>[u("重置")]),_:1},8,["onClick"])]),_:1}),l(w,{class:"box-item",effect:"dark",content:"回购当前显示的卡密",placement:"top-start"},{default:a(()=>[l(ce,{title:"是否根据筛选条件回购对应的卡密",onConfirm:ue,"confirm-button-text":"是","cancel-button-text":"否"},{reference:a(()=>[l(m,{class:"ml-[10px]",type:"danger"},{default:a(()=>[u("回购卡密")]),_:1})]),_:1},8,["onConfirm"])]),_:1}),l(w,{class:"box-item",effect:"dark",content:"导出当前的卡密",placement:"top-start"},{default:a(()=>[l(m,{type:"primary",onClick:se},{default:a(()=>[u("导出卡密")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(G,null,{default:a(()=>{var t,h;return[l(me,{data:(t=V(i).Data.CarList)==null?void 0:t.Cars,style:{width:"100%"},stripe:""},{default:a(()=>[l(D,{label:"序号",type:"index",index:ee,width:"80",align:"center"}),l(D,{prop:"ExeID",label:"软件名称",width:"150",align:"center"},{default:a(o=>[u(K(oe(o.row.ExeID)),1)]),_:1}),l(D,{prop:"Serial",label:"卡号",width:"350",align:"center"}),l(D,{prop:"State",label:"状态",width:"80",align:"center"},{default:a(o=>[o.row.State?(s(),f(C,{key:0,type:"success",effect:"dark"},{default:a(()=>[u("正常 ")]),_:1})):(s(),f(C,{key:1,type:"danger",effect:"dark"},{default:a(()=>[u("禁用")]),_:1}))]),_:1}),l(D,{prop:"TyCar",label:"类型",width:"80",align:"center"},{default:a(o=>[o.row.TyCar==0?(s(),f(C,{key:0,type:"info",effect:"dark"},{default:a(()=>[u("小时卡")]),_:1})):I("",!0),o.row.TyCar==1?(s(),f(C,{key:1,type:"primary",effect:"dark"},{default:a(()=>[u("天卡")]),_:1})):I("",!0),o.row.TyCar==2?(s(),f(C,{key:2,type:"success",effect:"dark"},{default:a(()=>[u("周卡")]),_:1})):I("",!0),o.row.TyCar==3?(s(),f(C,{key:3,type:"warning",effect:"dark"},{default:a(()=>[u("月卡")]),_:1})):I("",!0),o.row.TyCar==4?(s(),f(C,{key:4,type:"warning",effect:"dark"},{default:a(()=>[u("季卡")]),_:1})):I("",!0),o.row.TyCar==5?(s(),f(C,{key:5,type:"danger",effect:"dark"},{default:a(()=>[u("半年卡")]),_:1})):I("",!0),o.row.TyCar==6?(s(),f(C,{key:6,type:"danger",effect:"dark"},{default:a(()=>[u("年卡")]),_:1})):I("",!0),o.row.TyCar==7?(s(),f(C,{key:7,type:"danger",effect:"dark"},{default:a(()=>[u("永久卡")]),_:1})):I("",!0)]),_:1}),l(D,{prop:"Price",label:"成本价",width:"80",align:"center"},{default:a(o=>[l(C,{type:"danger",effect:"dark"},{default:a(()=>[u(K(o.row.Price)+"￥",1)]),_:2},1024)]),_:1}),l(D,{prop:"Lock",label:"出售锁定",width:"80",align:"center"},{default:a(o=>[o.row.Lock?(s(),f(C,{key:0,type:"danger",effect:"dark"},{default:a(()=>[u("已售锁定")]),_:1})):(s(),f(C,{key:1,type:"success",effect:"dark"},{default:a(()=>[u("可售")]),_:1}))]),_:1}),l(D,{prop:"Bak",label:"备注",width:"200",align:"center"}),l(D,{label:"操作 ",fixed:De()?!1:"right",align:"center","min-width":"300"},{default:a(o=>[l(m,{type:"primary",size:"small",onClick:W=>ie(o.row.Serial)},{default:a(()=>[u("复制")]),_:2},1032,["onClick"]),l(m,{type:"warning",size:"small",onClick:W=>le(o.row)},{default:a(()=>[u("封卡")]),_:2},1032,["onClick"]),l(m,{type:"danger",size:"small",onClick:W=>te(o.row)},{default:a(()=>[u("回购")]),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["data"]),N("div",Oe,[l(fe,{"current-page":T.value,"onUpdate:currentPage":r[3]||(r[3]=o=>T.value=o),"page-size":_.value,"onUpdate:pageSize":r[4]||(r[4]=o=>_.value=o),"page-sizes":[60,100,150],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:(h=V(i).Data.CarList)==null?void 0:h.CarNum,onSizeChange:X,onCurrentChange:Z},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]}),_:1})]),l(Ce,{modelValue:z.value,"onUpdate:modelValue":r[11]||(r[11]=t=>z.value=t),title:R.value,class:"max-w-[500px]",width:"100%",center:""},{default:a(()=>[l(G,null,{default:a(()=>[l(U,{label:"制卡软件"},{default:a(()=>[l(b,{modelValue:e.ExeID,"onUpdate:modelValue":r[5]||(r[5]=t=>e.ExeID=t),class:"w-[150px] ml-[30px]",placeholder:"软件筛选",onChange:O},{default:a(()=>[(s(!0),S(L,null,A(V(i).Data.ExeList.Exes,t=>(s(),f(v,{key:t.ID,label:t.Title,value:t.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),l(U,{label:"卡密类型"},{default:a(()=>[l(b,{modelValue:e.TyCar,"onUpdate:modelValue":r[6]||(r[6]=t=>e.TyCar=t),class:"w-[120px] ml-[30px]",placeholder:"卡密筛选",onChange:Y},{default:a(()=>[(s(!0),S(L,null,A(Pe,t=>(s(),f(v,{key:t.Title,label:t.Title,value:t.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(U,{label:"卡密单价"},{default:a(()=>[l(g,{class:"ml-[30px]",modelValue:e.UPrice,"onUpdate:modelValue":r[7]||(r[7]=t=>e.UPrice=t),disabled:"true",style:{width:"80px"}},null,8,["modelValue"]),qe]),_:1}),l(U,{label:"制卡数量"},{default:a(()=>[l(ve,{class:"ml-[30px]",modelValue:e.CarNum,"onUpdate:modelValue":r[8]||(r[8]=t=>e.CarNum=t),min:1,max:500,onChange:Y},null,8,["modelValue"])]),_:1}),l(U,{label:"购买价格"},{default:a(()=>[l(g,{class:"ml-[30px]",modelValue:B.value,"onUpdate:modelValue":r[9]||(r[9]=t=>B.value=t),disabled:"true",style:{width:"80px","justify-content":"center","align-items":"center"}},null,8,["modelValue"])]),_:1}),l(U,{label:"备注信息"},{default:a(()=>[l(g,{placeholder:"请输入备注信息 已便方便搜索",modelValue:e.Bak,"onUpdate:modelValue":r[10]||(r[10]=t=>e.Bak=t),type:"textarea"},null,8,["modelValue"])]),_:1}),N("div",Xe,[l(m,{type:"primary",class:"w-[200px]",onClick:q,disabled:e.TPrice==0},{default:a(()=>[u("立即购买")]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{ka as default};
