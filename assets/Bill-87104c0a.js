import{u as Y}from"./Data-22c9805f.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css               *//* empty css                  *//* empty css                        *//* empty css                  */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 *//* empty css                   */import{_ as v,$ as Z,a0 as H,a1 as O}from"./SDK-b20afac4.js";import{i as Q}from"./Lib-8a9b4113.js";import{d as ee,r as c,o as te,x as le,J as ae,q as oe,b,e as t,w as a,F as ne,G as re,p as ie,a as d,f as n,B as C,u as T,c as f,g as _,K as ue,k as se,n as pe,X as de,N as me,t as ce,W as fe,Y as _e,Z as ge,ac as ve}from"./index-d0b4b41e.js";import{S as Se}from"./Search-fd19a2cb.js";import"./index-c417e2fb.js";import"./index-9c55a241.js";const we={class:"h-[850px] p-[15px]"},xe={class:"mt-[10px] ml-[10px]"},ke={class:"mt-[30px] h-[50px] text-center text-2xl text-red-800"},Je=ee({__name:"Bill",setup(Te){const p=Y(),g=c(1),i=c(30),x=c(""),k=c(""),V=c(!1),E=c(!1),S=c(""),w=c("");te(()=>{v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)});const e=le({Skip:i.value*(g.value-1),Limt:i.value,Value:"",AgentID:"",StartTimeStr:"",EndTimeStr:""}),L=()=>{e.Skip=i.value*(g.value-1),e.Limt=i.value,i.value<=p.Data.BillList.BillNum&&v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},I=()=>{e.Skip=i.value*(g.value-1),e.Limt=i.value,v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},U=u=>{const o=g.value,r=i.value;return u+1+(o-1)*r},A=u=>{for(let o=0;o<p.Data.ExeList.Exes.length;o++)if(u==p.Data.ExeList.Exes[o].ID)return p.Data.ExeList.Exes[o].Title;return"未知"},z=u=>{Z(u),v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},N=()=>{v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},D=()=>{e.Value="",g.value=1,i.value=60,e.Skip=0,e.Limt=60,e.StartTimeStr="",e.EndTimeStr="",v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},P=()=>{p.Data.CountBills="",S.value="",w.value="",V.value=!0},M=()=>{if(!(S.value==""||w.value=="")&&!(S.value==null||w.value==null)){var u=Date.parse(S.value).toString(),o=Date.parse(w.value).toString();H(u,o)}},$=()=>{x.value==""||k.value==""||x.value==null||k.value==null||(e.StartTimeStr=Date.parse(x.value).toString(),e.EndTimeStr=Date.parse(k.value).toString(),v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr))},F=()=>{O(),D()},G=u=>u.substring(0,19).replace("T"," ");return(u,o)=>{const r=ue,j=se,m=pe,q=de,J=me,K=ce,h=re,s=fe,R=_e,W=ge,y=ve,X=ae("sanp"),B=ie;return d(),oe(ne,null,[b("div",we,[t(h,{class:"mb-[15px]"},{default:a(()=>[t(K,null,{default:a(()=>[t(J,{wrap:""},{default:a(()=>[t(r,{effect:"danger"},{default:a(()=>[n("页销售额: "+C(T(p).Data.BillList.Price)+" ￥",1)]),_:1}),t(j,{style:{width:"300px"},modelValue:e.Value,"onUpdate:modelValue":o[0]||(o[0]=l=>e.Value=l),placeholder:"要查询的卡密/备注/用户名","prefix-icon":T(Se)},null,8,["modelValue","prefix-icon"]),t(m,{type:"primary",onClick:N},{default:a(()=>[n("查询")]),_:1},8,["onClick"]),t(m,{type:"primary",onClick:D},{default:a(()=>[n("重置")]),_:1},8,["onClick"]),t(q,{title:"确定清空所有账单?",onConfirm:F},{reference:a(()=>[t(m,{type:"danger"},{default:a(()=>[n("清空账单")]),_:1})]),_:1},8,["onConfirm"]),t(m,{type:"success",onClick:P},{default:a(()=>[n("统计")]),_:1}),t(m,{type:"warning",onClick:o[1]||(o[1]=l=>E.value=!0)},{default:a(()=>[n("筛选")]),_:1})]),_:1})]),_:1})]),_:1}),t(h,null,{default:a(()=>[t(R,{data:T(p).Data.BillList.Bills,style:{width:"100%"},stripe:""},{default:a(()=>[t(s,{label:"序号",type:"index",index:U,width:"80",align:"center"}),t(s,{prop:"ID","show-overflow-tooltip":"true",label:"订单号",width:"250",align:"center"}),t(s,{prop:"UseName","show-overflow-tooltip":"true",label:"用户名",width:"150",align:"center"}),t(s,{prop:"Serial","show-overflow-tooltip":"true",label:"卡号",width:"250",align:"center"}),t(s,{prop:"TyCar",label:"类型",width:"80",align:"center"},{default:a(l=>[l.row.TyCar==0?(d(),f(r,{key:0,effect:"info"},{default:a(()=>[n("小时卡")]),_:1})):_("",!0),l.row.TyCar==1?(d(),f(r,{key:1,effect:"dark"},{default:a(()=>[n("天卡")]),_:1})):_("",!0),l.row.TyCar==2?(d(),f(r,{key:2,effect:"success"},{default:a(()=>[n("周卡")]),_:1})):_("",!0),l.row.TyCar==3?(d(),f(r,{key:3,effect:"warning"},{default:a(()=>[n("月卡")]),_:1})):_("",!0),l.row.TyCar==4?(d(),f(r,{key:4,effect:"warning"},{default:a(()=>[n("季卡")]),_:1})):_("",!0),l.row.TyCar==5?(d(),f(r,{key:5,effect:"danger"},{default:a(()=>[n("半年卡")]),_:1})):_("",!0),l.row.TyCar==6?(d(),f(r,{key:6,effect:"danger"},{default:a(()=>[n("年卡")]),_:1})):_("",!0),l.row.TyCar==7?(d(),f(r,{key:7,effect:"danger"},{default:a(()=>[n("永久卡")]),_:1})):_("",!0)]),_:1}),t(s,{prop:"ExeID",label:"软件名称",width:"150",align:"center"},{default:a(l=>[n(C(A(l.row.ExeID)),1)]),_:1}),t(s,{prop:"Price","show-overflow-tooltip":"true",label:"售价",width:"80",align:"center"}),t(s,{prop:"Bak","show-overflow-tooltip":"true",label:"备注",width:"150",align:"center"}),t(s,{prop:"UseTime","show-overflow-tooltip":"true",label:"使用时间",width:"150",align:"center"},{default:a(l=>[t(r,{effect:"danger"},{default:a(()=>[n(C(G(l.row.UseTime)),1)]),_:2},1024)]),_:1}),t(s,{label:"操作 ",fixed:Q()?!1:"right",align:"center","min-width":"80"},{default:a(l=>[t(m,{type:"warning",size:"small",onClick:ye=>z(l.row.ID)},{default:a(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["data"]),b("div",xe,[t(W,{"current-page":g.value,"onUpdate:currentPage":o[2]||(o[2]=l=>g.value=l),"page-size":i.value,"onUpdate:pageSize":o[3]||(o[3]=l=>i.value=l),"page-sizes":[30,60,100],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:T(p).Data.BillList.BillNum,onSizeChange:L,onCurrentChange:I},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),t(B,{title:"统计",center:"",modelValue:V.value,"onUpdate:modelValue":o[6]||(o[6]=l=>V.value=l),width:"100%",class:"max-w-[600px] m-auto","before-close":!1},{default:a(()=>[t(y,{modelValue:S.value,"onUpdate:modelValue":o[4]||(o[4]=l=>S.value=l),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),n("- "),t(y,{modelValue:w.value,"onUpdate:modelValue":o[5]||(o[5]=l=>w.value=l),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"]),t(m,{type:"success",onClick:M},{default:a(()=>[n("统计")]),_:1},8,["onClick"]),b("div",ke,[t(X,null,{default:a(()=>[n(C(T(p).Data.CountBills),1)]),_:1})])]),_:1},8,["modelValue"]),t(B,{title:"筛选",center:"",modelValue:E.value,"onUpdate:modelValue":o[9]||(o[9]=l=>E.value=l),width:"100%",class:"max-w-[600px] m-auto","before-close":!1},{default:a(()=>[t(y,{modelValue:x.value,"onUpdate:modelValue":o[7]||(o[7]=l=>x.value=l),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),n("- "),t(y,{modelValue:k.value,"onUpdate:modelValue":o[8]||(o[8]=l=>k.value=l),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"]),t(m,{type:"success",onClick:$},{default:a(()=>[n("确定")]),_:1},8,["onClick"])]),_:1},8,["modelValue"])],64)}}});export{Je as default};
