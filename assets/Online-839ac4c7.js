import{u as q}from"./Data-afce409e.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                        *//* empty css               *//* empty css                  *//* empty css                     */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 *//* empty css                  */import{f as x,O as W,K as Y,M as Z}from"./SDK-e8ce8a69.js";import{i as $}from"./Lib-0ac898de.js";import{d as H,r as f,o as J,q as h,b as y,e as t,w as a,F as U,G as Q,p as X,a as c,B as k,u as _,f as n,i as ee,L as te,c as w,g as ae,E as le,n as ne,a6 as oe,N as se,t as re,W as ie,K as ue,Y as pe,Z as de,k as ce,a5 as _e}from"./index-ce1d2c5b.js";import"./index-4169358b.js";const me={class:"h-[850px] p-[15px]"},fe={class:"mx-[10px]"},ve={class:"mt-[10px] ml-[10px]"},ge={class:"推送消息"},xe={key:0,class:"justify-center text-center mt-[30px]"},Me=H({__name:"Online",setup(we){const u=q(),v=f(1),o=f(30);let p=f(o.value*(v.value-1)),d=f(o.value),s=f("");const b=f(""),E=f(!1);J(()=>{x(p.value,d.value)});const z=r=>{s.value=r},O=()=>{p.value=o.value*(v.value-1),d.value=o.value,o.value<=u.Data.OnlineUser.UserNum&&x(p.value,d.value)},V=()=>{p.value=o.value*(v.value-1),d.value=o.value,x(p.value,d.value)},L=r=>{const l=v.value,m=o.value;return r+1+(l-1)*m},S=r=>{for(let l=0;l<u.Data.ExeList.Exes.length;l++)if(r==u.Data.ExeList.Exes[l].ID)return u.Data.ExeList.Exes[l].Title;return"未知"},T=r=>{W(r),x(p.value,d.value)},I=()=>{Y(s.value),x(p.value,d.value)},C=r=>r.substring(0,19).replace("T"," "),N=()=>{x(p.value,d.value)},B=()=>{if(b.value==""){le.error("请输入要发送的消息");return}Z(s.value,b.value),E.value=!1};return(r,l)=>{const m=ne,M=_e,P=oe,R=se,j=re,D=Q,i=ie,g=ue,A=pe,F=de,G=ce,K=X;return c(),h(U,null,[y("div",me,[t(D,{class:"mb-[15px]"},{default:a(()=>[t(j,null,{default:a(()=>[t(R,{wrap:""},{default:a(()=>[y("div",fe," 当前在线人数:"+k(_(u).Data.OnlineUser.UserNum),1),t(m,{type:"primary",size:"default",onClick:N},{default:a(()=>[n("刷新")]),_:1},8,["onClick"]),t(P,{modelValue:_(s),"onUpdate:modelValue":l[0]||(l[0]=e=>ee(s)?s.value=e:s=e),style:{width:"180px"},placeholder:"请选择软件",onChange:z},{default:a(()=>[(c(!0),h(U,null,te(_(u).Data.ExeList.Exes,e=>(c(),w(M,{key:e.ID,label:e.Title,value:e.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),t(m,{type:"warning",size:"default",disabled:_(s)=="",onClick:l[1]||(l[1]=e=>E.value=!0)},{default:a(()=>[n("消息推送")]),_:1},8,["disabled"]),t(m,{class:"ml-[10px]",type:"danger",disabled:_(s)=="",onClick:I},{default:a(()=>[n("全部下线")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(A,{data:_(u).Data.OnlineUser.Users,style:{width:"100%"},stripe:""},{default:a(()=>[t(i,{label:"序号",type:"index",index:L,width:"80",align:"center"}),t(i,{prop:"ExeID",label:"软件名称",width:"150",align:"center"},{default:a(e=>[n(k(S(e.row.ExeID)),1)]),_:1}),t(i,{prop:"Name","show-overflow-tooltip":"true",label:"用户名","min-width":"200",align:"center"}),t(i,{prop:"Online",label:"在线",width:"80",align:"center"},{default:a(e=>[e.row.Online?(c(),w(g,{key:0,type:"primary",effect:"dark"},{default:a(()=>[n("在线")]),_:1})):(c(),w(g,{key:1,type:"info",effect:"dark"},{default:a(()=>[n("离线")]),_:1}))]),_:1}),t(i,{prop:"State",label:"状态",width:"80",align:"center"},{default:a(e=>[e.row.State?(c(),w(g,{key:0,type:"success",effect:"dark"},{default:a(()=>[n("正常 ")]),_:1})):(c(),w(g,{key:1,type:"danger",effect:"dark"},{default:a(()=>[n("禁用")]),_:1}))]),_:1}),t(i,{prop:"EndTime",label:"到期时间",width:"180",align:"center"},{default:a(e=>[t(g,{effect:"danger"},{default:a(()=>[n(k(C(e.row.EndTime)),1)]),_:2},1024)]),_:1}),t(i,{prop:"Bak","show-overflow-tooltip":"true",label:"备注","min-width":"200",align:"center"}),t(i,{prop:"LoginTime","show-overflow-tooltip":"true",label:"登录时间",width:"150",align:"center"},{default:a(e=>[t(g,{effect:"danger"},{default:a(()=>[n(k(C(e.row.LoginTime)),1)]),_:2},1024)]),_:1}),t(i,{prop:"LoginIP","show-overflow-tooltip":"true",label:"登录IP",width:"150",align:"center"}),t(i,{label:"操作 ",fixed:$()?!1:"right",align:"center","min-width":"100"},{default:a(e=>[t(m,{type:"warning",size:"small",onClick:be=>T(e.row.ID)},{default:a(()=>[n("下线")]),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["data"]),y("div",ve,[t(F,{"current-page":v.value,"onUpdate:currentPage":l[2]||(l[2]=e=>v.value=e),"page-size":o.value,"onUpdate:pageSize":l[3]||(l[3]=e=>o.value=e),"page-sizes":[30,60,100],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:_(u).Data.OnlineUser.UserNum,onSizeChange:O,onCurrentChange:V},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),y("div",ge,[t(K,{draggable:"",title:"消息推送",modelValue:E.value,"onUpdate:modelValue":l[5]||(l[5]=e=>E.value=e),width:"100%",class:"max-w-[600px]"},{default:a(()=>[t(G,{modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value=e),placeholder:"请输入消息",size:"normal",clearable:"",type:"textarea",autosize:{minRows:3,maxRows:3}},null,8,["modelValue"]),_(s)!=""?(c(),h("div",xe,[t(m,{class:"w-[100px]",type:"primary",size:"default",onClick:B},{default:a(()=>[n("发送")]),_:1},8,["onClick"])])):ae("",!0)]),_:1},8,["modelValue"])])],64)}}});export{Me as default};
