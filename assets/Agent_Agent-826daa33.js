import{u as Be}from"./Data-afce409e.js";/* empty css                       *//* empty css                 *//* empty css                     *//* empty css               *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                  *//* empty css                   *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                         *//* empty css                *//* empty css                 */import{i as V,j as Ne,k as ze,l as Se,m as Pe,n as Re,o as Te,C as Le,p as $e}from"./AgentSDK-1dca2650.js";import{i as Me}from"./Lib-0ac898de.js";import{d as je,r as i,x as O,o as he,J as Fe,q as Ge,b as f,e,w as a,F as qe,G as Je,p as Ke,a as S,f as s,u as I,i as We,c as h,B as P,E as Q,n as Ye,k as Ze,$ as He,N as Oe,t as Qe,W as Xe,K as el,a7 as ll,a8 as tl,a9 as al,Y as ol,Z as nl,l as sl,m as ul,a0 as dl,ad as il,a1 as rl,C as ml,ac as pl}from"./index-ce1d2c5b.js";import{S as fl}from"./Search-38234518.js";import"./index-4169358b.js";import"./index-61544327.js";const vl={class:"h-[850px] m-[15px]"},gl={class:"mt-[10px] ml-[10px]"},_l={class:"justify-center text-center"},cl={class:"justify-center text-center mt-[30px]"},wl={class:"m-auto justify-center text-center"},Vl=f("p",{class:"text-[20px] text-red-600 mb-[30px]"},"删除代理将一并删除代理的卡密",-1),Dl={class:"m-auto justify-center text-center"},xl={class:"justify-center text-center"},Il={class:"text-center m-auto"},bl=f("p",{class:"text-[20px] text-red-600 mb-[30px]"},"清空该代理所有账单?",-1),kl={class:"mt-[30px] h-[50px] text-center text-2xl text-red-800"},Ol=je({__name:"Agent_Agent",setup(Cl){const v=Be(),U=i(!1),R=i(!1),T=i(!1),A=i(!1),D=i(100),o=O({ID:"",Name:"",Pwd:"",Discount:0,Bak:""}),u=O({IsDelAgent:!1,IsDelBlack:!1,IsDelUser:!1,IsDelAgentBills:!1,IsDelEndTimeUser:!1,IsPayAgent:!1,IsRegister:!1,IsUnBindUser:!1}),k=i(1),c=i(60);let g=i(c.value*(k.value-1)),_=i(c.value),X=i(0),r=i(""),ee=i("");const le=()=>{U.value=!0,o.Name="",o.Pwd=""},te=n=>{o.ID=n.ID??"",o.Name=n.Name??"",o.Pwd=n.Pwd??"",o.Discount=n.Discount??0,o.Bak=n.Bak??"",u.IsDelAgent=n.Root.IsDelAgent??!1,u.IsDelBlack=n.Root.IsDelBlack??!1,u.IsDelUser=n.Root.IsDelUser??!1,u.IsDelAgentBills=n.Root.IsDelAgentBills??!1,u.IsDelEndTimeUser=n.Root.IsDelEndTimeUser??!1,u.IsPayAgent=n.Root.IsPayAgent??!1,u.IsRegister=n.Root.IsRegister??!1,u.IsUnBindUser=n.Root.IsUnBindUser??!1,L.value=n.ExeID,T.value=!0};let G;he(()=>{V(r.value,g.value,_.value),v.Data.ExeList.ExeNum!=0&&(G=Array.from({length:v.Data.ExeList.Exes.length}).map((n,t)=>({value:v.Data.ExeList.Exes[t].ID,label:v.Data.ExeList.Exes[t].Title})))});const L=i(["1"]),ae=()=>{Ne(o.ID,o.Discount,o.Bak,u,L.value),V(r.value,g.value,_.value),T.value=!1},oe=()=>{if(o.Name==""||o.Pwd==""){Q.error("用户名或密码不能为空");return}if(o.Name.length<6||o.Pwd.length<6){Q.error("用户名或密码不小于6位");return}ze(o.Name,o.Pwd),V(r.value,g.value,_.value),o.Name="",o.Pwd="",U.value=!1},ne=()=>{g.value=c.value*(k.value-1),_.value=c.value,c.value<v.Data.UserList.UserNum&&V(r.value,g.value,_.value)},se=()=>{g.value=c.value*(k.value-1),_.value=c.value,V(r.value,g.value,_.value)},q=()=>{r.value="",ee.value="",X.value=0,V(r.value,g.value,_.value)},ue=()=>{V(r.value,g.value,_.value)},de=n=>{const t=k.value,d=c.value;return n+1+(t-1)*d},ie=n=>{o.Name=n.Name,o.ID=n.ID,A.value=!0},re=()=>{Se(o.ID),V(r.value,g.value,_.value),A.value=!1},J=n=>n.substring(0,19).replace("T"," "),me=n=>{Pe(n.ID??"",!n.State),V(r.value,g.value,_.value)},pe=n=>{D.value=100,o.ID=n.ID??"",o.Name=n.Name??"",R.value=!0},fe=()=>{D.value>99999&&(D.value=99999),D.value<-99999&&(D.value=-99999),Re(o.ID,D.value),V(r.value,g.value,_.value),R.value=!1},$=i(!1),M=i(""),ve=()=>{o.ID==""||M.value==""||(Te(o.ID,M.value),$.value=!1)},ge=n=>{o.Name=n.Name,o.ID=n.ID,$.value=!0},_e=n=>n?n.length:0,K=()=>{v.Data.AgentBill=""},F=i(!1),E=i(""),B=i(""),ce=n=>{o.Name=n.Name,o.ID=n.ID,v.Data.AgentBill="",F.value=!0},we=()=>{if(!(E.value==""||B.value=="")&&!(E.value==null||B.value==null)){var n=Date.parse(E.value).toString(),t=Date.parse(B.value).toString();Le(o.ID,n,t)}},N=i(!1),Ve=n=>{o.Name=n.Name,o.ID=n.ID,N.value=!0},De=()=>{o.ID==""||o.Name==""||($e(o.ID),q(),N.value=!1)};return(n,t)=>{const d=Ye,w=Ze,xe=He,Ie=Oe,W=Qe,z=Je,m=Xe,C=el,j=ll,be=tl,ke=al,Ce=ol,ye=nl,p=sl,Ue=ul,b=Ke,Y=dl,Ae=il,x=rl,Z=ml,H=pl,Ee=Fe("sanp");return S(),Ge(qe,null,[f("div",vl,[e(z,{class:"mb-[15px]"},{default:a(()=>[e(W,null,{default:a(()=>[e(Ie,{wrap:""},{default:a(()=>[e(d,{type:"primary",onClick:le},{default:a(()=>[s("添加代理")]),_:1},8,["onClick"]),e(w,{modelValue:I(r),"onUpdate:modelValue":t[0]||(t[0]=l=>We(r)?r.value=l:r=l),style:{width:"300px"},placeholder:"请输入要查询的代理名","prefix-icon":I(fl)},null,8,["modelValue","prefix-icon"]),e(d,{type:"primary",onClick:ue},{default:a(()=>[s("查询")]),_:1},8,["onClick"]),e(xe,{class:"box-item",effect:"dark",content:"重置查询条件",placement:"top-start"},{default:a(()=>[e(d,{type:"primary",onClick:q},{default:a(()=>[s("重置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),e(z,null,{default:a(()=>[e(Ce,{data:I(v).Data.AgentList.Agents,style:{width:"100%"},"row-key":"ID",stripe:""},{default:a(()=>[e(m,{label:"序号",type:"index",index:de,width:"80",align:"center"}),e(m,{prop:"Name","show-overflow-tooltip":"true",label:"代理商",width:"150",align:"center"}),e(m,{prop:"Level","show-overflow-tooltip":"true",label:"等级",width:"120",align:"center"},{default:a(l=>[l.row.Level==0?(S(),h(C,{key:0,type:"danger",effect:"dark"},{default:a(()=>[s("S级总代理 ")]),_:1})):(S(),h(C,{key:1,type:"success",effect:"dark"},{default:a(()=>[s(P(l.row.Level)+"级代理 ",1)]),_:2},1024))]),_:1}),e(m,{prop:"State",label:"状态",width:"80",align:"center"},{default:a(l=>[l.row.State?(S(),h(C,{key:0,type:"success",effect:"dark"},{default:a(()=>[s("正常 ")]),_:1})):(S(),h(C,{key:1,type:"danger",effect:"dark"},{default:a(()=>[s("禁用")]),_:1}))]),_:1}),e(m,{prop:"Discount","show-overflow-tooltip":"true",label:"折扣系数",width:"80",align:"center"}),e(m,{prop:"MB","show-overflow-tooltip":"true",label:"账户余额",width:"100",align:"center"}),e(m,{prop:"CarCount","show-overflow-tooltip":"true",label:"库存卡",width:"80",align:"center"}),e(m,{prop:"BillCount","show-overflow-tooltip":"true",label:"销售额",width:"80",align:"center"}),e(m,{prop:"ExeID","show-overflow-tooltip":"true",label:"代理软件数",width:"100",align:"center"},{default:a(l=>[s(P(_e(l.row.ExeID)),1)]),_:1}),e(m,{prop:"AgentCount","show-overflow-tooltip":"true",label:"子代数量",width:"80",align:"center"}),e(m,{prop:"Bak","show-overflow-tooltip":"true",label:"备注",width:"200",align:"center"}),e(m,{prop:"LoginTime","show-overflow-tooltip":"true",label:"登录时间",width:"150",align:"center"},{default:a(l=>[e(C,{effect:"danger"},{default:a(()=>[s(P(J(l.row.LoginTime)),1)]),_:2},1024)]),_:1}),e(m,{prop:"LoginIP","show-overflow-tooltip":"true",label:"登录IP",width:"150",align:"center"}),e(m,{prop:"RegTime","show-overflow-tooltip":"true",label:"注册时间",width:"150",align:"center"},{default:a(l=>[e(C,{effect:"danger"},{default:a(()=>[s(P(J(l.row.RegTime)),1)]),_:2},1024)]),_:1}),e(m,{label:"操作 ",fixed:Me()?!1:"right",align:"center","min-width":"280"},{default:a(l=>[e(d,{type:"warning",size:"small",onClick:y=>me(l.row)},{default:a(()=>[s("封号")]),_:2},1032,["onClick"]),e(d,{type:"success",size:"small",onClick:y=>pe(l.row)},{default:a(()=>[s("充值")]),_:2},1032,["onClick"]),e(d,{type:"danger",size:"small",onClick:y=>te(l.row)},{default:a(()=>[s("权限")]),_:2},1032,["onClick"]),e(ke,{trigger:"click"},{dropdown:a(()=>[e(be,null,{default:a(()=>[e(j,null,{default:a(()=>[e(d,{type:"success",size:"small",onClick:y=>ce(l.row)},{default:a(()=>[s("统计账单")]),_:2},1032,["onClick"])]),_:2},1024),e(j,null,{default:a(()=>[e(d,{type:"danger",size:"small",onClick:y=>ge(l.row)},{default:a(()=>[s("重置密码")]),_:2},1032,["onClick"])]),_:2},1024),e(j,null,{default:a(()=>[e(d,{type:"danger",size:"small",disabled:!I(v).Data.AgentInfo.Root.IsDelAgentBills,onClick:y=>Ve(l.row)},{default:a(()=>[s("清空账单")]),_:2},1032,["disabled","onClick"])]),_:2},1024),e(j,null,{default:a(()=>[e(d,{type:"danger",size:"small",disabled:!I(v).Data.AgentInfo.Root.IsDelAgent,onClick:y=>ie(l.row)},{default:a(()=>[s("删除代理")]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[e(d,{class:"ml-[10px]",type:"primary",size:"small"},{default:a(()=>[s("更多⇊")]),_:1})]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data"]),f("div",gl,[e(ye,{"current-page":k.value,"onUpdate:currentPage":t[1]||(t[1]=l=>k.value=l),"page-size":c.value,"onUpdate:pageSize":t[2]||(t[2]=l=>c.value=l),"page-sizes":[60,100,150],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:I(v).Data.AgentList.AgentNum,onSizeChange:ne,onCurrentChange:se},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),e(b,{title:"添加代理",modelValue:U.value,"onUpdate:modelValue":t[6]||(t[6]=l=>U.value=l),width:"100%",class:"max-w-[350px]",center:"",draggable:""},{default:a(()=>[e(Ue,{"label-width":"80px",inline:!1,size:"normal"},{default:a(()=>[e(p,{label:"代理名"},{default:a(()=>[e(w,{modelValue:o.Name,"onUpdate:modelValue":t[3]||(t[3]=l=>o.Name=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"代理密码"},{default:a(()=>[e(w,{modelValue:o.Pwd,"onUpdate:modelValue":t[4]||(t[4]=l=>o.Pwd=l)},null,8,["modelValue"])]),_:1}),e(p,null,{default:a(()=>[e(d,{type:"primary",onClick:oe},{default:a(()=>[s("立即创建")]),_:1},8,["onClick"]),e(d,{onClick:t[5]||(t[5]=l=>U.value=!1)},{default:a(()=>[s("取消")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(b,{"close-on-click-modal":!1,draggable:"",title:"充值",modelValue:R.value,"onUpdate:modelValue":t[10]||(t[10]=l=>R.value=l),width:"100%",class:"max-w-[450px]",center:""},{default:a(()=>[e(z,null,{default:a(()=>[e(p,{label:"代理ID"},{default:a(()=>[e(w,{class:"ml-[30px]",modelValue:o.ID,"onUpdate:modelValue":t[7]||(t[7]=l=>o.ID=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"代理商"},{default:a(()=>[e(w,{class:"ml-[30px]",modelValue:o.Name,"onUpdate:modelValue":t[8]||(t[8]=l=>o.Name=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"充值余额"},{default:a(()=>[e(Y,{step:10,max:99999,min:-99999,class:"ml-[30px]",modelValue:D.value,"onUpdate:modelValue":t[9]||(t[9]=l=>D.value=l)},null,8,["modelValue"])]),_:1}),f("div",_l,[e(d,{class:"w-[100px]",type:"primary",size:"default",onClick:fe},{default:a(()=>[s(" 立即充值 ")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),e(b,{title:"权限设定",modelValue:T.value,"onUpdate:modelValue":t[24]||(t[24]=l=>T.value=l),width:"100%",class:"max-w-[650px]",center:"",draggable:"","close-on-click-modal":!1},{default:a(()=>[e(z,null,{default:a(()=>[e(p,{label:"代理ID"},{default:a(()=>[e(w,{class:"ml-[30px]",modelValue:o.ID,"onUpdate:modelValue":t[11]||(t[11]=l=>o.ID=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"代理商"},{default:a(()=>[e(w,{class:"ml-[30px]",modelValue:o.Name,"onUpdate:modelValue":t[12]||(t[12]=l=>o.Name=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"折扣系数"},{default:a(()=>[e(Y,{class:"ml-[30px]",modelValue:o.Discount,"onUpdate:modelValue":t[13]||(t[13]=l=>o.Discount=l),precision:2,step:.1,max:10,min:.01},null,8,["modelValue"])]),_:1}),e(p,{label:"备注"},{default:a(()=>[e(w,{class:"ml-[30px]",modelValue:o.Bak,"onUpdate:modelValue":t[14]||(t[14]=l=>o.Bak=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"代理软件"},{default:a(()=>[e(Ae,{modelValue:L.value,"onUpdate:modelValue":t[15]||(t[15]=l=>L.value=l),options:I(G),placeholder:"请选择需要代理的软件",style:{width:"540px"},multiple:""},null,8,["modelValue","options"])]),_:1}),f("div",null,[e(W,{gutter:20},{default:a(()=>[e(Z,{span:12,offset:0},{default:a(()=>[e(x,{modelValue:u.IsRegister,"onUpdate:modelValue":t[16]||(t[16]=l=>u.IsRegister=l),label:"注册子代",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsPayAgent,"onUpdate:modelValue":t[17]||(t[17]=l=>u.IsPayAgent=l),label:"子代充卡",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsUnBindUser,"onUpdate:modelValue":t[18]||(t[18]=l=>u.IsUnBindUser=l),label:"用户解绑",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsDelAgent,"onUpdate:modelValue":t[19]||(t[19]=l=>u.IsDelAgent=l),label:"删除子代",size:"large"},null,8,["modelValue"])]),_:1}),e(Z,{span:12,offset:0},{default:a(()=>[e(x,{modelValue:u.IsDelAgentBills,"onUpdate:modelValue":t[20]||(t[20]=l=>u.IsDelAgentBills=l),label:"清空子代账单",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsDelBlack,"onUpdate:modelValue":t[21]||(t[21]=l=>u.IsDelBlack=l),label:"解除黑名单",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsDelEndTimeUser,"onUpdate:modelValue":t[22]||(t[22]=l=>u.IsDelEndTimeUser=l),label:"清除到期用户",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsDelUser,"onUpdate:modelValue":t[23]||(t[23]=l=>u.IsDelUser=l),label:"删除用户",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),f("div",cl,[e(d,{class:"w-[100px]",type:"danger",size:"default",onClick:ae},{default:a(()=>[s("更新权限")]),_:1})])]),_:1})]),_:1},8,["modelValue"]),e(b,{title:"确认删除代理",modelValue:A.value,"onUpdate:modelValue":t[26]||(t[26]=l=>A.value=l),width:"100%",class:"max-w-[450px]",center:"",draggable:""},{default:a(()=>[f("div",wl,[Vl,f("div",Dl,[e(d,{onClick:t[25]||(t[25]=l=>A.value=!1)},{default:a(()=>[s("取消")]),_:1}),e(d,{type:"primary",onClick:re},{default:a(()=>[s("删除")]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"]),e(b,{"close-on-click-modal":!1,draggable:"",title:"重置密码",modelValue:$.value,"onUpdate:modelValue":t[29]||(t[29]=l=>$.value=l),width:"100%",class:"max-w-[450px]",center:""},{default:a(()=>[e(z,null,{default:a(()=>[e(p,{label:"用户ID"},{default:a(()=>[e(w,{class:"ml-[30px]",modelValue:o.ID,"onUpdate:modelValue":t[27]||(t[27]=l=>o.ID=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"新密码"},{default:a(()=>[e(w,{class:"ml-[30px]",modelValue:M.value,"onUpdate:modelValue":t[28]||(t[28]=l=>M.value=l)},null,8,["modelValue"])]),_:1}),f("div",xl,[e(d,{class:"w-[100px]",type:"primary",size:"default",onClick:ve},{default:a(()=>[s("重置")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),e(b,{title:"清空代理账单",modelValue:N.value,"onUpdate:modelValue":t[31]||(t[31]=l=>N.value=l),width:"100%",class:"max-w-[450px]",center:"",draggable:""},{default:a(()=>[f("div",Il,[bl,e(d,{onClick:t[30]||(t[30]=l=>N.value=!1)},{default:a(()=>[s("取消")]),_:1}),e(d,{type:"primary",onClick:De},{default:a(()=>[s("清空")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),e(b,{title:"代理账单统计",modelValue:F.value,"onUpdate:modelValue":t[34]||(t[34]=l=>F.value=l),width:"100%",class:"max-w-[700px]",center:"",draggable:""},{default:a(()=>[f("div",null,[e(H,{class:"ml-[30px]",modelValue:E.value,"onUpdate:modelValue":t[32]||(t[32]=l=>E.value=l),type:"datetime",placeholder:"开始时间",onChange:K},null,8,["modelValue","onChange"]),s(" - "),e(H,{modelValue:B.value,"onUpdate:modelValue":t[33]||(t[33]=l=>B.value=l),type:"datetime",placeholder:"结束时间",onChange:K},null,8,["modelValue","onChange"]),e(d,{type:"success",onClick:we},{default:a(()=>[s("统计")]),_:1},8,["onClick"])]),f("div",kl,[e(Ee,null,{default:a(()=>[s(P(I(v).Data.AgentBill),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}});export{Ol as default};
