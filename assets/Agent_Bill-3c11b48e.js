import{u as W}from"./Data-0e2b160c.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css               *//* empty css                  *//* empty css                        *//* empty css                  */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 */import{q as v,r as Y,s as Z}from"./AgentSDK-f3b8d40e.js";import{i as H}from"./Lib-68e63efa.js";import{d as O,r as m,o as Q,x as X,J as ee,q as te,b,e as l,w as o,F as le,G as ae,p as oe,a as d,f as n,B as C,u as T,c,g as f,K as ne,k as re,n as ie,N as ue,t as se,W as pe,Y as de,Z as me,ac as ce}from"./index-a03fb73d.js";import{S as fe}from"./Search-96d0cf4e.js";import"./index-d608f87e.js";import"./index-9d39963a.js";const _e={class:"h-[850px] p-[15px]"},ge={class:"mt-[10px] ml-[10px]"},ve={class:"mt-[30px] h-[50px] text-center text-2xl text-red-800"},qe=O({__name:"Agent_Bill",setup(Se){const p=W(),x=m(""),k=m(""),S=m(""),w=m(""),V=m(!1),E=m(!1);Q(()=>{v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)});const B=()=>{p.Data.CountBills="",S.value="",w.value="",V.value=!0},L=()=>{if(!(S.value==""||w.value=="")&&!(S.value==null||w.value==null)){var u=Date.parse(S.value).toString(),a=Date.parse(w.value).toString();Y(u,a)}},I=()=>{x.value==""||k.value==""||x.value==null||k.value==null||(e.StartTimeStr=Date.parse(x.value).toString(),e.EndTimeStr=Date.parse(k.value).toString(),v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr))},_=m(1),i=m(60),e=X({Skip:i.value*(_.value-1),Limt:i.value,Value:"",AgentID:"",StartTimeStr:"",EndTimeStr:""}),U=()=>{e.Skip=i.value*(_.value-1),e.Limt=i.value,i.value<p.Data.BillList.BillNum&&v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},A=()=>{e.Skip=i.value*(_.value-1),e.Limt=i.value,v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},z=u=>{Z(u),v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},N=u=>{const a=_.value,r=i.value;return u+1+(a-1)*r},P=u=>{for(let a=0;a<p.Data.ExeList.Exes.length;a++)if(u==p.Data.ExeList.Exes[a].ID)return p.Data.ExeList.Exes[a].Title;return"未知"},M=()=>{v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},q=()=>{e.Value="",_.value=1,i.value=60,e.Skip=0,e.Limt=60,e.StartTimeStr="",e.EndTimeStr="",v(e.Value,e.Skip,e.Limt,e.AgentID,e.StartTimeStr,e.EndTimeStr)},F=u=>u.substring(0,19).replace("T"," ");return(u,a)=>{const r=ne,G=re,g=ie,$=ue,j=se,D=ae,s=pe,J=de,K=me,y=ce,R=ee("sanp"),h=oe;return d(),te(le,null,[b("div",_e,[l(D,{class:"mb-[15px]"},{default:o(()=>[l(j,null,{default:o(()=>[l($,{wrap:""},{default:o(()=>[l(r,{effect:"danger"},{default:o(()=>[n("页销售额: "+C(T(p).Data.BillList.Price)+" ￥",1)]),_:1}),l(G,{style:{width:"300px"},modelValue:e.Value,"onUpdate:modelValue":a[0]||(a[0]=t=>e.Value=t),placeholder:"要查询的卡密/备注/用户名","prefix-icon":T(fe)},null,8,["modelValue","prefix-icon"]),l(g,{type:"primary",onClick:M},{default:o(()=>[n("查询")]),_:1},8,["onClick"]),l(g,{type:"primary",onClick:q},{default:o(()=>[n("重置")]),_:1},8,["onClick"]),l(g,{type:"success",onClick:B},{default:o(()=>[n("统计")]),_:1}),l(g,{type:"warning",onClick:a[1]||(a[1]=t=>E.value=!0)},{default:o(()=>[n("筛选")]),_:1})]),_:1})]),_:1})]),_:1}),l(D,null,{default:o(()=>[l(J,{data:T(p).Data.BillList.Bills,style:{width:"100%"},stripe:""},{default:o(()=>[l(s,{label:"序号",type:"index",index:N,width:"80",align:"center"}),l(s,{prop:"ID","show-overflow-tooltip":"true",label:"订单号",width:"250",align:"center"}),l(s,{prop:"UseName","show-overflow-tooltip":"true",label:"用户名",width:"150",align:"center"}),l(s,{prop:"Serial","show-overflow-tooltip":"true",label:"卡号",width:"250",align:"center"}),l(s,{prop:"TyCar",label:"类型",width:"80",align:"center"},{default:o(t=>[t.row.TyCar==0?(d(),c(r,{key:0,effect:"info"},{default:o(()=>[n("小时卡")]),_:1})):f("",!0),t.row.TyCar==1?(d(),c(r,{key:1,effect:"dark"},{default:o(()=>[n("天卡")]),_:1})):f("",!0),t.row.TyCar==2?(d(),c(r,{key:2,effect:"success"},{default:o(()=>[n("周卡")]),_:1})):f("",!0),t.row.TyCar==3?(d(),c(r,{key:3,effect:"warning"},{default:o(()=>[n("月卡")]),_:1})):f("",!0),t.row.TyCar==4?(d(),c(r,{key:4,effect:"warning"},{default:o(()=>[n("季卡")]),_:1})):f("",!0),t.row.TyCar==5?(d(),c(r,{key:5,effect:"danger"},{default:o(()=>[n("半年卡")]),_:1})):f("",!0),t.row.TyCar==6?(d(),c(r,{key:6,effect:"danger"},{default:o(()=>[n("年卡")]),_:1})):f("",!0),t.row.TyCar==7?(d(),c(r,{key:7,effect:"danger"},{default:o(()=>[n("永久卡")]),_:1})):f("",!0)]),_:1}),l(s,{prop:"ExeID",label:"软件名称",width:"150",align:"center"},{default:o(t=>[n(C(P(t.row.ExeID)),1)]),_:1}),l(s,{prop:"Price","show-overflow-tooltip":"true",label:"售价",width:"80",align:"center"}),l(s,{prop:"Bak","show-overflow-tooltip":"true",label:"备注",width:"150",align:"center"}),l(s,{prop:"UseTime","show-overflow-tooltip":"true",label:"使用时间",width:"150",align:"center"},{default:o(t=>[l(r,{effect:"danger"},{default:o(()=>[n(C(F(t.row.UseTime)),1)]),_:2},1024)]),_:1}),l(s,{label:"操作 ",fixed:H()?!1:"right",align:"center","min-width":"80"},{default:o(t=>[l(g,{type:"warning",size:"small",onClick:we=>z(t.row.ID)},{default:o(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["data"]),b("div",ge,[l(K,{"current-page":_.value,"onUpdate:currentPage":a[2]||(a[2]=t=>_.value=t),"page-size":i.value,"onUpdate:pageSize":a[3]||(a[3]=t=>i.value=t),"page-sizes":[30,60,100],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:T(p).Data.BillList.BillNum,onSizeChange:U,onCurrentChange:A},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),l(h,{title:"统计",center:"",modelValue:V.value,"onUpdate:modelValue":a[6]||(a[6]=t=>V.value=t),width:"100%",class:"max-w-[600px] m-auto","before-close":!1},{default:o(()=>[l(y,{modelValue:S.value,"onUpdate:modelValue":a[4]||(a[4]=t=>S.value=t),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),n("- "),l(y,{modelValue:w.value,"onUpdate:modelValue":a[5]||(a[5]=t=>w.value=t),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"]),l(g,{type:"success",onClick:L},{default:o(()=>[n("统计")]),_:1},8,["onClick"]),b("div",ve,[l(R,null,{default:o(()=>[n(C(T(p).Data.CountBills),1)]),_:1})])]),_:1},8,["modelValue"]),l(h,{title:"筛选",center:"",modelValue:E.value,"onUpdate:modelValue":a[9]||(a[9]=t=>E.value=t),width:"100%",class:"max-w-[600px] m-auto","before-close":!1},{default:o(()=>[l(y,{modelValue:x.value,"onUpdate:modelValue":a[7]||(a[7]=t=>x.value=t),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),n("- "),l(y,{modelValue:k.value,"onUpdate:modelValue":a[8]||(a[8]=t=>k.value=t),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"]),l(g,{type:"success",onClick:I},{default:o(()=>[n("确定")]),_:1},8,["onClick"])]),_:1},8,["modelValue"])],64)}}});export{qe as default};
