import{u as Ne}from"./Data-22c9805f.js";/* empty css                       *//* empty css                 *//* empty css                     *//* empty css               *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                  *//* empty css                   *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                         *//* empty css                *//* empty css                 */import{a as w,N as K,P as ze,Q as Se,T as Pe,V as Re,W as Te,X as Le,Y as $e,Z as Me}from"./SDK-b20afac4.js";import{H as he,i as je}from"./Lib-8a9b4113.js";import{d as Fe,r as i,x as Q,o as Ge,J as He,q as We,b as f,e,w as a,F as Ye,G as Ze,p as qe,a as S,f as s,u as P,i as Je,c as j,B as R,E as X,n as Ke,k as Qe,$ as Xe,N as Oe,t as el,W as ll,K as tl,a7 as al,a8 as ol,a9 as nl,Y as sl,Z as ul,l as dl,m as il,a0 as rl,ad as ml,a1 as pl,C as fl,ac as vl}from"./index-d0b4b41e.js";import{S as _l}from"./Search-fd19a2cb.js";import"./index-c417e2fb.js";import"./index-9c55a241.js";const cl={class:"h-[850px] m-[15px]"},gl={class:"mt-[10px] ml-[10px]"},wl={class:"justify-center text-center"},Vl={class:"justify-center text-center mt-[30px]"},Dl={class:"m-auto justify-center text-center"},xl=f("p",{class:"text-[20px] text-red-600 mb-[30px]"},"删除代理将一并删除代理的卡密",-1),Il={class:"m-auto justify-center text-center"},bl={class:"justify-center text-center"},kl={class:"text-center m-auto"},Cl=f("p",{class:"text-[20px] text-red-600 mb-[30px]"},"清空该代理所有账单?",-1),yl={class:"mt-[30px] h-[50px] text-center text-2xl text-red-800"},Ol=Fe({__name:"Agent",setup(Ul){const V=Ne(),U=i(!1),T=i(!1),L=i(!1),E=i(!1),D=i(100),o=Q({ID:"",Name:"",Pwd:"",Discount:0,Bak:""}),u=Q({IsDelAgent:!1,IsDelBlack:!1,IsDelUser:!1,IsDelAgentBills:!1,IsDelEndTimeUser:!1,IsPayAgent:!1,IsRegister:!1,IsUnBindUser:!1}),k=i(1),c=i(30);let v=i(c.value*(k.value-1)),_=i(c.value),O=i(0),r=i(""),ee=i("");const le=()=>{U.value=!0,o.Name="",o.Pwd=""},te=n=>{o.ID=n.ID??"",o.Name=n.Name??"",o.Pwd=n.Pwd??"",o.Discount=n.Discount??0,o.Bak=n.Bak??"",u.IsDelAgent=n.Root.IsDelAgent??!1,u.IsDelBlack=n.Root.IsDelBlack??!1,u.IsDelUser=n.Root.IsDelUser??!1,u.IsDelAgentBills=n.Root.IsDelAgentBills??!1,u.IsDelEndTimeUser=n.Root.IsDelEndTimeUser??!1,u.IsPayAgent=n.Root.IsPayAgent??!1,u.IsRegister=n.Root.IsRegister??!1,u.IsUnBindUser=n.Root.IsUnBindUser??!1,$.value=n.ExeID,L.value=!0},$=i(["1"]),ae=i(Array.from({length:V.Data.ExeList.Exes.length}).map((n,t)=>({value:V.Data.ExeList.Exes[t].ID,label:V.Data.ExeList.Exes[t].Title}))),oe=()=>{ze(o.ID,o.Discount,o.Bak,u,$.value),w(r.value,v.value,_.value),L.value=!1},ne=()=>{if(o.Name==""||o.Pwd==""){X.error("用户名或密码不能为空");return}if(o.Name.length<6||o.Pwd.length<6){X.error("用户名或密码不小于6位");return}Se(o.Name,o.Pwd),w(r.value,v.value,_.value),o.Name="",o.Pwd="",U.value=!1};Ge(()=>{w(r.value,v.value,_.value)});const se=()=>{v.value=c.value*(k.value-1),_.value=c.value,c.value<=V.Data.UserList.UserNum&&w(r.value,v.value,_.value)},ue=()=>{v.value=c.value*(k.value-1),_.value=c.value,w(r.value,v.value,_.value)},G=()=>{r.value="",ee.value="",O.value=0,w(r.value,v.value,_.value)},de=()=>{w(r.value,v.value,_.value)},ie=n=>{const t=k.value,d=c.value;return n+1+(t-1)*d},re=n=>{o.Name=n.Name,o.ID=n.ID,E.value=!0},me=()=>{Pe(o.ID),w(r.value,v.value,_.value),E.value=!1},H=n=>n.substring(0,19).replace("T"," "),pe=n=>{Re(n.ID??"",!n.State),w(r.value,v.value,_.value)},fe=n=>{D.value=100,o.ID=n.ID??"",o.Name=n.Name??"",T.value=!0},ve=()=>{D.value>99999&&(D.value=99999),D.value<-99999&&(D.value=-99999),Te(o.ID,D.value),w(r.value,v.value,_.value),T.value=!1},M=i(!1),h=i(""),_e=n=>{o.Name=n.Name,o.ID=n.ID,M.value=!0},ce=()=>{o.ID==""||h.value==""||(Le(o.ID,h.value),M.value=!1)},ge=n=>n?n.length:0,A=i(!1),we=n=>{o.Name=n.Name,o.ID=n.ID,A.value=!0},Ve=()=>{o.ID==""||o.Name==""||($e(o.ID),G(),A.value=!1)},F=i(!1),B=i(""),N=i(""),W=()=>{V.Data.AgentBill=""},De=n=>{o.Name=n.Name,o.ID=n.ID,V.Data.AgentBill="",F.value=!0},xe=()=>{if(!(B.value==""||N.value=="")&&!(B.value==null||N.value==null)){var n=Date.parse(B.value).toString(),t=Date.parse(N.value).toString();Me(o.ID,n,t)}};return(n,t)=>{const d=Ke,g=Qe,Ie=Xe,be=Oe,Y=el,z=Ze,m=ll,C=tl,y=al,ke=ol,Ce=nl,ye=sl,Ue=ul,p=dl,Ee=il,b=qe,Z=rl,Ae=ml,x=pl,q=fl,J=vl,Be=He("sanp");return S(),We(Ye,null,[f("div",cl,[e(z,{class:"mb-[15px]"},{default:a(()=>[e(Y,null,{default:a(()=>[e(be,{wrap:""},{default:a(()=>[e(d,{type:"primary",onClick:le},{default:a(()=>[s("添加代理")]),_:1},8,["onClick"]),e(g,{modelValue:P(r),"onUpdate:modelValue":t[0]||(t[0]=l=>Je(r)?r.value=l:r=l),style:{width:"300px"},placeholder:"要查询的代理名","prefix-icon":P(_l)},null,8,["modelValue","prefix-icon"]),e(d,{type:"primary",onClick:de},{default:a(()=>[s("查询")]),_:1},8,["onClick"]),e(Ie,{class:"box-item",effect:"dark",content:"重置查询条件",placement:"top-start"},{default:a(()=>[e(d,{type:"primary",onClick:G},{default:a(()=>[s("重置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),e(z,null,{default:a(()=>[e(ye,{data:he(P(V).Data.AgentList.Agents),style:{width:"100%"},"row-key":"ID",stripe:""},{default:a(()=>[e(m,{label:"序号",type:"index",index:ie,width:"80",align:"center"}),e(m,{prop:"Name","show-overflow-tooltip":"true",label:"代理商",width:"150",align:"center"}),e(m,{prop:"Level","show-overflow-tooltip":"true",label:"等级",width:"140",align:"center"},{default:a(l=>[l.row.Level==0?(S(),j(C,{key:0,type:"danger",effect:"dark"},{default:a(()=>[s("S级总代理")]),_:1})):(S(),j(C,{key:1,type:"success",effect:"dark"},{default:a(()=>[s(R(l.row.Level)+"级代理",1)]),_:2},1024))]),_:1}),e(m,{prop:"State",label:"状态",width:"80",align:"center"},{default:a(l=>[l.row.State?(S(),j(C,{key:0,type:"success",effect:"dark"},{default:a(()=>[s("正常")]),_:1})):(S(),j(C,{key:1,type:"danger",effect:"dark"},{default:a(()=>[s("禁用")]),_:1}))]),_:1}),e(m,{prop:"Discount","show-overflow-tooltip":"true",label:"折扣系数",width:"80",align:"center"}),e(m,{prop:"MB","show-overflow-tooltip":"true",label:"账户余额",width:"100",align:"center"}),e(m,{prop:"CarCount","show-overflow-tooltip":"true",label:"库存卡",width:"80",align:"center"}),e(m,{prop:"BillCount","show-overflow-tooltip":"true",label:"销售额",width:"80",align:"center"}),e(m,{prop:"ExeID","show-overflow-tooltip":"true",label:"代理软件数",width:"100",align:"center"},{default:a(l=>[s(R(ge(l.row.ExeID)),1)]),_:1}),e(m,{prop:"AgentCount","show-overflow-tooltip":"true",label:"子代数量",width:"80",align:"center"}),e(m,{prop:"Bak","show-overflow-tooltip":"true",label:"备注",width:"200",align:"center"}),e(m,{prop:"LoginTime","show-overflow-tooltip":"true",label:"登录时间",width:"150",align:"center"},{default:a(l=>[e(C,{effect:"danger"},{default:a(()=>[s(R(H(l.row.LoginTime)),1)]),_:2},1024)]),_:1}),e(m,{prop:"LoginIP","show-overflow-tooltip":"true",label:"登录IP",width:"150",align:"center"}),e(m,{prop:"RegTime","show-overflow-tooltip":"true",label:"注册时间",width:"150",align:"center"},{default:a(l=>[e(C,{effect:"danger"},{default:a(()=>[s(R(H(l.row.RegTime)),1)]),_:2},1024)]),_:1}),e(m,{label:"操作 ",align:"center",fixed:je()?!1:"right","min-width":"280"},{default:a(l=>[e(d,{type:"warning",size:"small",onClick:I=>pe(l.row)},{default:a(()=>[s("封号")]),_:2},1032,["onClick"]),e(d,{type:"success",size:"small",onClick:I=>fe(l.row)},{default:a(()=>[s("充值")]),_:2},1032,["onClick"]),e(d,{type:"danger",size:"small",onClick:I=>te(l.row)},{default:a(()=>[s("权限")]),_:2},1032,["onClick"]),e(Ce,{trigger:"click"},{dropdown:a(()=>[e(ke,null,{default:a(()=>[e(y,null,{default:a(()=>[e(d,{type:"success",size:"small",onClick:I=>De(l.row)},{default:a(()=>[s("统计账单 ")]),_:2},1032,["onClick"])]),_:2},1024),e(y,null,{default:a(()=>[e(d,{type:"success",size:"small",onClick:I=>K(l.row.ID,!0)},{default:a(()=>[s("全体解封 ")]),_:2},1032,["onClick"])]),_:2},1024),e(y,null,{default:a(()=>[e(d,{type:"warning",size:"small",onClick:I=>K(l.row.ID,!1)},{default:a(()=>[s("全体封号 ")]),_:2},1032,["onClick"])]),_:2},1024),e(y,null,{default:a(()=>[e(d,{type:"danger",size:"small",onClick:I=>we(l.row)},{default:a(()=>[s("清空账单 ")]),_:2},1032,["onClick"])]),_:2},1024),e(y,null,{default:a(()=>[e(d,{type:"danger",size:"small",onClick:I=>_e(l.row)},{default:a(()=>[s("重置密码 ")]),_:2},1032,["onClick"])]),_:2},1024),e(y,null,{default:a(()=>[e(d,{type:"danger",size:"small",onClick:I=>re(l.row)},{default:a(()=>[s("删除代理 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[e(d,{class:"ml-[10px]",type:"primary",size:"small"},{default:a(()=>[s("更多⇊")]),_:1})]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data"]),f("div",gl,[e(Ue,{"current-page":k.value,"onUpdate:currentPage":t[1]||(t[1]=l=>k.value=l),"page-size":c.value,"onUpdate:pageSize":t[2]||(t[2]=l=>c.value=l),"page-sizes":[30,60,100],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:P(V).Data.AgentList.AgentNum,onSizeChange:se,onCurrentChange:ue},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),e(b,{title:"添加代理",modelValue:U.value,"onUpdate:modelValue":t[6]||(t[6]=l=>U.value=l),width:"100%",class:"max-w-[350px]",center:"",draggable:""},{default:a(()=>[e(Ee,{"label-width":"80px",inline:!1,size:"normal"},{default:a(()=>[e(p,{label:"代理名"},{default:a(()=>[e(g,{modelValue:o.Name,"onUpdate:modelValue":t[3]||(t[3]=l=>o.Name=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"代理密码"},{default:a(()=>[e(g,{modelValue:o.Pwd,"onUpdate:modelValue":t[4]||(t[4]=l=>o.Pwd=l)},null,8,["modelValue"])]),_:1}),e(p,null,{default:a(()=>[e(d,{type:"primary",onClick:ne},{default:a(()=>[s("立即创建")]),_:1},8,["onClick"]),e(d,{onClick:t[5]||(t[5]=l=>U.value=!1)},{default:a(()=>[s("取消")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(b,{"close-on-click-modal":!1,draggable:"",title:"充值",modelValue:T.value,"onUpdate:modelValue":t[10]||(t[10]=l=>T.value=l),width:"100%",class:"max-w-[450px]",center:""},{default:a(()=>[e(z,null,{default:a(()=>[e(p,{label:"代理ID"},{default:a(()=>[e(g,{class:"ml-[30px]",modelValue:o.ID,"onUpdate:modelValue":t[7]||(t[7]=l=>o.ID=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"代理商"},{default:a(()=>[e(g,{class:"ml-[30px]",modelValue:o.Name,"onUpdate:modelValue":t[8]||(t[8]=l=>o.Name=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"充值余额"},{default:a(()=>[e(Z,{step:10,max:99999,min:-99999,class:"ml-[30px]",modelValue:D.value,"onUpdate:modelValue":t[9]||(t[9]=l=>D.value=l)},null,8,["modelValue"])]),_:1}),f("div",wl,[e(d,{class:"w-[100px]",type:"primary",size:"default",onClick:ve},{default:a(()=>[s(" 立即充值 ")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),e(b,{title:"权限设定",modelValue:L.value,"onUpdate:modelValue":t[24]||(t[24]=l=>L.value=l),width:"100%",class:"max-w-[650px]",center:"",draggable:"","close-on-click-modal":!1},{default:a(()=>[e(z,null,{default:a(()=>[e(p,{label:"代理ID"},{default:a(()=>[e(g,{class:"ml-[30px]",modelValue:o.ID,"onUpdate:modelValue":t[11]||(t[11]=l=>o.ID=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"代理商"},{default:a(()=>[e(g,{class:"ml-[30px]",modelValue:o.Name,"onUpdate:modelValue":t[12]||(t[12]=l=>o.Name=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"折扣系数"},{default:a(()=>[e(Z,{class:"ml-[30px]",modelValue:o.Discount,"onUpdate:modelValue":t[13]||(t[13]=l=>o.Discount=l),precision:2,step:.1,max:10,min:.01},null,8,["modelValue"])]),_:1}),e(p,{label:"备注"},{default:a(()=>[e(g,{class:"ml-[30px]",modelValue:o.Bak,"onUpdate:modelValue":t[14]||(t[14]=l=>o.Bak=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"代理软件"},{default:a(()=>[e(Ae,{modelValue:$.value,"onUpdate:modelValue":t[15]||(t[15]=l=>$.value=l),options:ae.value,placeholder:"请选择需要代理的软件",style:{width:"540px"},multiple:""},null,8,["modelValue","options"])]),_:1}),f("div",null,[e(Y,{gutter:20},{default:a(()=>[e(q,{span:12,offset:0},{default:a(()=>[e(x,{modelValue:u.IsRegister,"onUpdate:modelValue":t[16]||(t[16]=l=>u.IsRegister=l),label:"注册子代",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsPayAgent,"onUpdate:modelValue":t[17]||(t[17]=l=>u.IsPayAgent=l),label:"子代充卡",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsUnBindUser,"onUpdate:modelValue":t[18]||(t[18]=l=>u.IsUnBindUser=l),label:"用户解绑",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsDelAgent,"onUpdate:modelValue":t[19]||(t[19]=l=>u.IsDelAgent=l),label:"删除子代",size:"large"},null,8,["modelValue"])]),_:1}),e(q,{span:12,offset:0},{default:a(()=>[e(x,{modelValue:u.IsDelAgentBills,"onUpdate:modelValue":t[20]||(t[20]=l=>u.IsDelAgentBills=l),label:"清空子代账单",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsDelBlack,"onUpdate:modelValue":t[21]||(t[21]=l=>u.IsDelBlack=l),label:"解除黑名单",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsDelEndTimeUser,"onUpdate:modelValue":t[22]||(t[22]=l=>u.IsDelEndTimeUser=l),label:"清除到期用户",size:"large"},null,8,["modelValue"]),e(x,{modelValue:u.IsDelUser,"onUpdate:modelValue":t[23]||(t[23]=l=>u.IsDelUser=l),label:"删除用户",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),f("div",Vl,[e(d,{class:"w-[100px]",type:"danger",size:"default",onClick:oe},{default:a(()=>[s("更新权限")]),_:1})])]),_:1})]),_:1},8,["modelValue"]),e(b,{title:"确认删除代理",modelValue:E.value,"onUpdate:modelValue":t[26]||(t[26]=l=>E.value=l),width:"100%",class:"max-w-[450px]",center:"",draggable:""},{default:a(()=>[f("div",Dl,[xl,f("div",Il,[e(d,{onClick:t[25]||(t[25]=l=>E.value=!1)},{default:a(()=>[s("取消")]),_:1}),e(d,{type:"primary",onClick:me},{default:a(()=>[s("删除")]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"]),e(b,{"close-on-click-modal":!1,draggable:"",title:"重置密码",modelValue:M.value,"onUpdate:modelValue":t[29]||(t[29]=l=>M.value=l),width:"100%",class:"max-w-[450px]",center:""},{default:a(()=>[e(z,null,{default:a(()=>[e(p,{label:"用户ID"},{default:a(()=>[e(g,{class:"ml-[30px]",modelValue:o.ID,"onUpdate:modelValue":t[27]||(t[27]=l=>o.ID=l),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"新密码"},{default:a(()=>[e(g,{class:"ml-[30px]",modelValue:h.value,"onUpdate:modelValue":t[28]||(t[28]=l=>h.value=l)},null,8,["modelValue"])]),_:1}),f("div",bl,[e(d,{class:"w-[100px]",type:"primary",size:"default",onClick:ce},{default:a(()=>[s("重置")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),e(b,{title:"清空代理账单",modelValue:A.value,"onUpdate:modelValue":t[31]||(t[31]=l=>A.value=l),width:"100%",class:"max-w-[450px]",center:"",draggable:""},{default:a(()=>[f("div",kl,[Cl,e(d,{onClick:t[30]||(t[30]=l=>A.value=!1)},{default:a(()=>[s("取消")]),_:1}),e(d,{type:"primary",onClick:Ve},{default:a(()=>[s("清空")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),e(b,{title:"代理账单统计",modelValue:F.value,"onUpdate:modelValue":t[34]||(t[34]=l=>F.value=l),width:"100%",class:"max-w-[700px]",center:"",draggable:""},{default:a(()=>[f("div",null,[e(J,{class:"ml-[30px]",modelValue:B.value,"onUpdate:modelValue":t[32]||(t[32]=l=>B.value=l),type:"datetime",placeholder:"开始时间",onChange:W},null,8,["modelValue","onChange"]),s(" - "),e(J,{modelValue:N.value,"onUpdate:modelValue":t[33]||(t[33]=l=>N.value=l),type:"datetime",placeholder:"结束时间",onChange:W},null,8,["modelValue","onChange"]),e(d,{type:"success",onClick:xe},{default:a(()=>[s("统计")]),_:1},8,["onClick"])]),f("div",yl,[e(Be,null,{default:a(()=>[s(R(P(V).Data.AgentBill),1)]),_:1})])]),_:1},8,["modelValue"])],64)}}});export{Ol as default};
