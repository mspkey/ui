import{u as fe}from"./Data-0e2b160c.js";/* empty css                  *//* empty css                   */import"./el-form-item-4ed993c7.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                     */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                         *//* empty css                *//* empty css                 *//* empty css                   *//* empty css                 */import{e as m,O as ce,f as _e,g as ve,U as me,R as we,h as ge}from"./AgentSDK-f3b8d40e.js";import{i as be,c as ye}from"./Lib-68e63efa.js";import{e as ke}from"./db-bef06366.js";import{d as xe,r as h,o as De,x as he,q as S,b as N,e as l,w as e,F as B,G as Ce,p as Ie,a as u,u as k,i as R,L as $,f as a,B as U,c,g,E as Ee,a5 as Ue,a6 as Le,k as Ve,n as Te,$ as Pe,X as ze,N as Se,t as Ne,W as Be,K as Re,a7 as Oe,a8 as Ae,a9 as Me,Y as $e,Z as Fe,l as je}from"./index-a03fb73d.js";import{S as Ge}from"./Search-96d0cf4e.js";import"./index-d608f87e.js";import"./index-9d39963a.js";const qe={class:"h-[850px] p-[15px]"},Ke={class:"mt-[10px] ml-[10px]"},We={class:"justify-center text-center"},wl=xe({__name:"Agent_User",setup(Xe){const b=fe(),C=h(1),y=h(60);let _=h(y.value*(C.value-1)),v=h(y.value),s=h(0),p=h(""),i=h("");De(()=>{m(p.value,s.value,_.value,v.value,i.value)});const F=o=>{ye(o),Ee.success("卡密复制成功")},j=async o=>{ce(o),m(p.value,s.value,_.value,v.value,i.value)},G=()=>{_.value=y.value*(C.value-1),v.value=y.value,y.value<b.Data.UserList.UserNum&&m(p.value,s.value,_.value,v.value,i.value)},q=()=>{_.value=y.value*(C.value-1),v.value=y.value,m(p.value,s.value,_.value,v.value,i.value)},K=()=>{p.value="",i.value="",s.value=0,m(p.value,s.value,_.value,v.value,i.value)},W=()=>{m(p.value,s.value,_.value,v.value,i.value)},X=o=>{const r=C.value,I=y.value;return o+1+(r-1)*I},Y=o=>{_e(o),m(p.value,s.value,_.value,v.value,i.value)},Z=o=>{i.value=o,m(p.value,s.value,_.value,v.value,i.value)},H=o=>{s.value=o,m(p.value,s.value,_.value,v.value,i.value)},J=o=>{for(let r=0;r<b.Data.ExeList.Exes.length;r++)if(o==b.Data.ExeList.Exes[r].ID)return b.Data.ExeList.Exes[r].Title;return"未知"},Q=()=>{ve(),m(p.value,s.value,_.value,v.value,i.value)},L=o=>o.substring(0,19).replace("T"," "),ee=o=>{me(o.ID??"",!o.State,o.Bak??"",o.BindCont??0,o.Online??!1,o.Conf??"",o.Level??0),m(p.value,s.value,_.value,v.value,i.value)},le=o=>{we(o),m(p.value,s.value,_.value,v.value,i.value)},V=h(!1),D=he({UID:"",NewPwd:""}),te=o=>{D.UID=o,D.NewPwd="",V.value=!0},ae=()=>{ge(D.UID,D.NewPwd),V.value=!1};return(o,r)=>{const I=Ue,O=Le,T=Ve,w=Te,A=Pe,oe=ze,ne=Se,re=Ne,P=Ce,d=Be,f=Re,z=Oe,ue=Ae,se=Me,ie=$e,de=Fe,M=je,pe=Ie;return u(),S(B,null,[N("div",qe,[l(P,{class:"mb-[15px]"},{default:e(()=>[l(re,null,{default:e(()=>[l(ne,{wrap:""},{default:e(()=>[l(O,{modelValue:k(i),"onUpdate:modelValue":r[0]||(r[0]=n=>R(i)?i.value=n:i=n),style:{width:"160px"},placeholder:"软件筛选",onChange:Z},{default:e(()=>{var n;return[l(I,{key:"全部软件",label:"全部软件",value:""}),(u(!0),S(B,null,$((n=k(b).Data.ExeList)==null?void 0:n.Exes,x=>(u(),c(I,{key:x.ID,label:x.Title,value:x.ID},null,8,["label","value"]))),128))]}),_:1},8,["modelValue","onChange"]),l(O,{modelValue:k(s),"onUpdate:modelValue":r[1]||(r[1]=n=>R(s)?s.value=n:s=n),style:{width:"130px"},placeholder:"类型筛选",onChange:H},{default:e(()=>[(u(!0),S(B,null,$(ke,n=>(u(),c(I,{key:n.Title,label:n.Title,value:n.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l(T,{modelValue:k(p),"onUpdate:modelValue":r[2]||(r[2]=n=>R(p)?p.value=n:p=n),style:{width:"350px"},placeholder:"请输入要查询的卡密/备注/设备ID","prefix-icon":k(Ge)},null,8,["modelValue","prefix-icon"]),l(w,{type:"primary",onClick:W},{default:e(()=>[a("查询")]),_:1},8,["onClick"]),l(A,{class:"box-item",effect:"dark",content:"重置查询条件",placement:"top-start"},{default:e(()=>[l(w,{type:"primary",onClick:K},{default:e(()=>[a("重置")]),_:1},8,["onClick"])]),_:1}),l(A,{class:"box-item",effect:"dark",content:"清空到期用户",placement:"top-start"},{default:e(()=>[l(oe,{title:"是否清空全部到期用户",onConfirm:Q,"confirm-button-text":"是","cancel-button-text":"否"},{reference:e(()=>{var n,x;return[l(w,{disabled:!((x=(n=k(b).Data.AgentInfo)==null?void 0:n.Root)!=null&&x.IsDelEndTimeUser),class:"ml-[10px]",type:"danger"},{default:e(()=>[a("清空到期用户")]),_:1},8,["disabled"])]}),_:1},8,["onConfirm"])]),_:1})]),_:1})]),_:1})]),_:1}),l(P,null,{default:e(()=>{var n,x;return[l(ie,{data:(n=k(b).Data.UserList)==null?void 0:n.Users,style:{width:"100%"},stripe:""},{default:e(()=>[l(d,{label:"序号",type:"index",index:X,width:"80",align:"center"}),l(d,{prop:"ExeID",label:"软件名称",width:"150",align:"center"},{default:e(t=>[a(U(J(t.row.ExeID)),1)]),_:1}),l(d,{prop:"Name","show-overflow-tooltip":"true",label:"用户名",width:"150",align:"center"}),l(d,{prop:"Online",label:"在线",width:"80",align:"center"},{default:e(t=>[t.row.Online?(u(),c(f,{key:0,type:"primary",effect:"dark"},{default:e(()=>[a("在线")]),_:1})):(u(),c(f,{key:1,type:"info",effect:"dark"},{default:e(()=>[a("离线")]),_:1}))]),_:1}),l(d,{prop:"State",label:"状态",width:"80",align:"center"},{default:e(t=>[t.row.State?(u(),c(f,{key:0,type:"success",effect:"dark"},{default:e(()=>[a("正常 ")]),_:1})):(u(),c(f,{key:1,type:"danger",effect:"dark"},{default:e(()=>[a("禁用")]),_:1}))]),_:1}),l(d,{prop:"Level",label:"注册类型",width:"80",align:"center"},{default:e(t=>[t.row.Level==0?(u(),c(f,{key:0,type:"info",effect:"dark"},{default:e(()=>[a("小时卡")]),_:1})):g("",!0),t.row.Level==1?(u(),c(f,{key:1,type:"primary",effect:"dark"},{default:e(()=>[a("天卡")]),_:1})):g("",!0),t.row.Level==2?(u(),c(f,{key:2,type:"success",effect:"dark"},{default:e(()=>[a("周卡")]),_:1})):g("",!0),t.row.Level==3?(u(),c(f,{key:3,type:"warning",effect:"dark"},{default:e(()=>[a("月卡")]),_:1})):g("",!0),t.row.Level==4?(u(),c(f,{key:4,type:"warning",effect:"dark"},{default:e(()=>[a("季卡")]),_:1})):g("",!0),t.row.Level==5?(u(),c(f,{key:5,type:"danger",effect:"dark"},{default:e(()=>[a("半年卡")]),_:1})):g("",!0),t.row.Level==6?(u(),c(f,{key:6,type:"danger",effect:"dark"},{default:e(()=>[a("年卡")]),_:1})):g("",!0),t.row.Level==7?(u(),c(f,{key:7,type:"danger",effect:"dark"},{default:e(()=>[a("永久卡")]),_:1})):g("",!0),t.row.Level>7?(u(),c(f,{key:8,type:"info"},{default:e(()=>[a("其他")]),_:1})):g("",!0)]),_:1}),l(d,{prop:"EndTime",label:"到期时间",width:"180",align:"center"},{default:e(t=>[l(f,{effect:"danger"},{default:e(()=>[a(U(L(t.row.EndTime)),1)]),_:2},1024)]),_:1}),l(d,{prop:"Serial","show-overflow-tooltip":"true",label:"注册卡密",width:"150",align:"center"}),l(d,{prop:"DeviceID","show-overflow-tooltip":"true",label:"设备ID",width:"150",align:"center"}),l(d,{prop:"Bak","show-overflow-tooltip":"true",label:"备注",width:"200",align:"center"}),l(d,{prop:"LoginTime","show-overflow-tooltip":"true",label:"登录时间",width:"150",align:"center"},{default:e(t=>[l(f,{effect:"danger"},{default:e(()=>[a(U(L(t.row.LoginTime)),1)]),_:2},1024)]),_:1}),l(d,{prop:"LastLoginTime","show-overflow-tooltip":"true",label:"上一次登录时间",width:"150",align:"center"},{default:e(t=>[l(f,{effect:"danger"},{default:e(()=>[a(U(L(t.row.LastLoginTime)),1)]),_:2},1024)]),_:1}),l(d,{prop:"LoginIP","show-overflow-tooltip":"true",label:"登录IP",width:"150",align:"center"}),l(d,{prop:"LastLoginIP","show-overflow-tooltip":"true",label:"上一次登录IP",width:"150",align:"center"}),l(d,{prop:"RegTime","show-overflow-tooltip":"true",label:"注册时间",width:"150",align:"center"},{default:e(t=>[l(f,{effect:"danger"},{default:e(()=>[a(U(L(t.row.RegTime)),1)]),_:2},1024)]),_:1}),l(d,{prop:"RegIP","show-overflow-tooltip":"true",label:"注册IP",width:"150",align:"center"}),l(d,{prop:"AgentID","show-overflow-tooltip":"true",label:"代理商",width:"150",align:"center"}),l(d,{label:"操作 ",fixed:be()?!1:"right",align:"center","min-width":"350"},{default:e(t=>[l(w,{type:"warning",size:"small",onClick:E=>ee(t.row)},{default:e(()=>[a("封号")]),_:2},1032,["onClick"]),l(w,{type:"success",size:"small",disabled:!k(b).Data.AgentInfo.Root.IsUnBindUser,onClick:E=>le(t.row.ID)},{default:e(()=>[a("解绑")]),_:2},1032,["disabled","onClick"]),l(w,{type:"danger",size:"small",disabled:!k(b).Data.AgentInfo.Root.IsDelUser,onClick:E=>Y(t.row.ID)},{default:e(()=>[a("删除")]),_:2},1032,["disabled","onClick"]),l(se,{trigger:"click"},{dropdown:e(()=>[l(ue,null,{default:e(()=>[l(z,null,{default:e(()=>[l(w,{type:"warning",size:"small",onClick:E=>F(t.row.Name)},{default:e(()=>[a("复制卡密")]),_:2},1032,["onClick"])]),_:2},1024),t.row.Online==!0?(u(),c(z,{key:0},{default:e(()=>[l(w,{type:"danger",size:"small",onClick:E=>j(t.row.ID)},{default:e(()=>[a("强制下线")]),_:2},1032,["onClick"])]),_:2},1024)):g("",!0),t.row.Name.length<20?(u(),c(z,{key:1},{default:e(()=>[l(w,{type:"warning",size:"small",onClick:E=>te(t.row.ID)},{default:e(()=>[a("重置密码")]),_:2},1032,["onClick"])]),_:2},1024)):g("",!0)]),_:2},1024)]),default:e(()=>[l(w,{class:"ml-[10px]",type:"primary",size:"small"},{default:e(()=>[a("更多⇊")]),_:1})]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data"]),N("div",Ke,[l(de,{"current-page":C.value,"onUpdate:currentPage":r[3]||(r[3]=t=>C.value=t),"page-size":y.value,"onUpdate:pageSize":r[4]||(r[4]=t=>y.value=t),"page-sizes":[60,100,150],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:(x=k(b).Data.UserList)==null?void 0:x.UserNum,onSizeChange:G,onCurrentChange:q},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]}),_:1})]),l(pe,{draggable:"",title:"重置密码",modelValue:V.value,"onUpdate:modelValue":r[7]||(r[7]=n=>V.value=n),width:"100%",center:"",class:"max-w-[500px]"},{default:e(()=>[l(P,null,{default:e(()=>[l(M,{label:"用户ID"},{default:e(()=>[l(T,{class:"ml-[30px]",modelValue:D.UID,"onUpdate:modelValue":r[5]||(r[5]=n=>D.UID=n),disabled:""},null,8,["modelValue"])]),_:1}),l(M,{label:"新密码"},{default:e(()=>[l(T,{class:"ml-[30px]",modelValue:D.NewPwd,"onUpdate:modelValue":r[6]||(r[6]=n=>D.NewPwd=n)},null,8,["modelValue"])]),_:1}),N("div",We,[l(w,{class:"w-[100px]",type:"primary",size:"default",onClick:ae},{default:e(()=>[a("重置")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"])],64)}}});export{wl as default};
