import{u as me}from"./Data-0e2b160c.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                        */import"./el-form-item-4ed993c7.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                     */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 *//* empty css                   *//* empty css                  */import{m as _,n as fe,S as ve,o as _e,p as Ce,q as ye,r as R}from"./SDK-a1e9b68d.js";import{d as xe,T as ke}from"./db-bef06366.js";import{i as be,c as ge}from"./Lib-68e63efa.js";import{d as we,r as k,x as Ee,o as Ve,q as D,b as U,e as l,w as a,F as h,G as Te,p as De,a as p,f as o,u as g,i as z,L as I,B as F,c,g as w,E as M,a4 as he,n as Se,a5 as Le,a6 as Ie,k as Be,$ as Pe,X as Ne,N as Ue,t as ze,W as Me,K as Ae,Y as $e,Z as Re,l as Fe,a0 as je}from"./index-a03fb73d.js";import{S as qe}from"./Search-96d0cf4e.js";import"./index-d608f87e.js";import"./index-9d39963a.js";const Ge={class:"h-[850px] p-[15px]"},Ke={class:"mt-[10px] ml-[10px]"},Oe={class:"justify-center text-center"},_a=we({__name:"Card",setup(We){const E=k(1),x=k(30);let m=k(x.value*(E.value-1)),f=k(x.value),s=k(9),d=k(""),i=k("");const r=Ee({CarNum:1,ExeID:"",TyCar:1,Bak:"",Price:1,Prefix:""}),C=me(),S=k(!1),A=k("创建卡密"),j=k("提交");Ve(()=>{_(d.value,s.value,m.value,f.value,i.value,"")});const q=u=>{ge(u),M.success("卡密复制成功")},G=()=>{if(r.ExeID==""){M.error("请选择对应的软件");return}fe(r.ExeID,r.Prefix,r.CarNum,r.TyCar,r.Price,r.Bak),_(d.value,s.value,m.value,f.value,i.value,""),S.value=!1},K=()=>{m.value=x.value*(E.value-1),f.value=x.value,x.value<=C.Data.CarList.CarNum&&_(d.value,s.value,m.value,f.value,i.value,"")},O=()=>{m.value=x.value*(E.value-1),f.value=x.value,_(d.value,s.value,m.value,f.value,i.value,"")},W=()=>{d.value="",i.value="",s.value=9,E.value=1,x.value=60,_(d.value,s.value,0,60,i.value,"")},X=()=>{_(d.value,s.value,m.value,f.value,i.value,"")},Y=u=>{const t=E.value,n=x.value;return u+1+(t-1)*n},Z=()=>{r.Bak="",r.ExeID="",r.CarNum=10,r.TyCar=0,r.Price=1,A.value="添加卡密",j.value="提交",S.value=!0},H=u=>{ve(u.Serial,!u.State),_(d.value,s.value,m.value,f.value,i.value,"")},J=u=>{_e(u.Serial,!u.Lock),_(d.value,s.value,m.value,f.value,i.value,"")},Q=u=>{Ce(u.Serial),_(d.value,s.value,m.value,f.value,i.value,"")},ee=u=>{i.value=u,_(d.value,s.value,m.value,f.value,i.value,"")},ae=u=>{s.value=u,_(d.value,s.value,m.value,f.value,i.value,"")},le=u=>{for(let t=0;t<C.Data.ExeList.Exes.length;t++)if(u==C.Data.ExeList.Exes[t].ID)return C.Data.ExeList.Exes[t].Title;return"未知"},te=()=>{ye(i.value,d.value,s.value),_(d.value,s.value,m.value,f.value,i.value,"")},ne=()=>{R(i.value,d.value,s.value,!0),_(d.value,s.value,m.value,f.value,i.value,"")},oe=()=>{R(i.value,d.value,s.value,!1),_(d.value,s.value,m.value,f.value,i.value,"")},ue=()=>{if(C.Data.CarList.Cars==null){M.error("当前没有卡密");return}let u="";he.confirm("是否选择带序号导出","导出卡密",{confirmButtonText:"是",cancelButtonText:"否",type:"info"}).then(()=>{for(let v=0;v<C.Data.CarList.Cars.length;v++)u=u+"第"+(v+1).toString()+"张-->"+C.Data.CarList.Cars[v].Serial+`
`;const t="卡密.txt",n=document.createElement("a");n.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(u)}`),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}).catch(()=>{for(let v=0;v<C.Data.CarList.Cars.length;v++)u=u+C.Data.CarList.Cars[v].Serial+`
`;const t="卡密.txt",n=document.createElement("a");n.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(u)}`),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)})};return(u,t)=>{const n=Se,v=Le,L=Ie,B=Be,T=Pe,re=Ne,se=Ue,ie=ze,P=Te,b=Me,y=Ae,de=$e,pe=Re,V=Fe,$=je,ce=De;return p(),D(h,null,[U("div",Ge,[l(P,{class:"mb-[15px]"},{default:a(()=>[l(ie,null,{default:a(()=>[l(se,{wrap:""},{default:a(()=>[l(n,{type:"primary",onClick:Z},{default:a(()=>[o("添加卡密")]),_:1},8,["onClick"]),l(L,{style:{width:"160px"},modelValue:g(i),"onUpdate:modelValue":t[0]||(t[0]=e=>z(i)?i.value=e:i=e),placeholder:"软件筛选",onChange:ee},{default:a(()=>[l(v,{key:"全部软件",label:"全部软件",value:""}),(p(!0),D(h,null,I(g(C).Data.ExeList.Exes,e=>(p(),c(v,{key:e.ID,label:e.Title,value:e.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l(L,{style:{width:"130px"},modelValue:g(s),"onUpdate:modelValue":t[1]||(t[1]=e=>z(s)?s.value=e:s=e),placeholder:"卡密筛选",onChange:ae},{default:a(()=>[(p(!0),D(h,null,I(xe,e=>(p(),c(v,{key:e.Title,label:e.Title,value:e.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l(B,{modelValue:g(d),"onUpdate:modelValue":t[2]||(t[2]=e=>z(d)?d.value=e:d=e),style:{width:"350px","max-width":"320px"},placeholder:"请输入要查询的卡密/备注/","prefix-icon":g(qe)},null,8,["modelValue","prefix-icon"]),l(n,{type:"primary",onClick:X},{default:a(()=>[o("查询")]),_:1},8,["onClick"]),l(T,{class:"box-item",effect:"dark",content:"重置查询条件",placement:"top-start"},{default:a(()=>[l(n,{type:"primary",onClick:W},{default:a(()=>[o("重置")]),_:1},8,["onClick"])]),_:1}),l(T,{class:"box-item",effect:"dark",content:"封禁前筛选条件的卡密",placement:"top-start"},{default:a(()=>[l(n,{type:"warning",onClick:oe},{default:a(()=>[o("一键封卡")]),_:1},8,["onClick"])]),_:1}),l(T,{class:"box-item",effect:"dark",content:"解封当前筛选条件的卡密",placement:"top-start"},{default:a(()=>[l(n,{type:"success",onClick:ne},{default:a(()=>[o("一键解卡")]),_:1},8,["onClick"])]),_:1}),l(T,{class:"box-item",effect:"dark",content:"清空当前显示的卡密",placement:"top-start"},{default:a(()=>[l(re,{title:"是否根据筛选条件删除对应的卡密",onConfirm:te,"confirm-button-text":"是","cancel-button-text":"否"},{reference:a(()=>[l(n,{type:"danger"},{default:a(()=>[o("一键删除")]),_:1})]),_:1},8,["onConfirm"])]),_:1}),l(T,{class:"box-item",effect:"dark",content:"导出当前的卡密",placement:"top-start"},{default:a(()=>[l(n,{type:"primary",onClick:ue},{default:a(()=>[o("导出卡密")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),l(P,null,{default:a(()=>[l(de,{data:g(C).Data.CarList.Cars,style:{width:"100%"},stripe:""},{default:a(()=>[l(b,{label:"序号",type:"index",index:Y,"min-width":"80",align:"center"}),l(b,{prop:"ExeID",label:"软件名称",width:"150",align:"center"},{default:a(e=>[o(F(le(e.row.ExeID)),1)]),_:1}),l(b,{prop:"Serial",label:"卡号",width:"350",align:"center"}),l(b,{prop:"State",label:"状态",width:"80",align:"center"},{default:a(e=>[e.row.State?(p(),c(y,{key:0,type:"success",effect:"dark"},{default:a(()=>[o("正常 ")]),_:1})):(p(),c(y,{key:1,type:"danger",effect:"dark"},{default:a(()=>[o("禁用")]),_:1}))]),_:1}),l(b,{prop:"TyCar",label:"类型",width:"80",align:"center"},{default:a(e=>[e.row.TyCar==0?(p(),c(y,{key:0,type:"info",effect:"dark"},{default:a(()=>[o("小时卡")]),_:1})):w("",!0),e.row.TyCar==1?(p(),c(y,{key:1,type:"primary",effect:"dark"},{default:a(()=>[o("天卡")]),_:1})):w("",!0),e.row.TyCar==2?(p(),c(y,{key:2,type:"success",effect:"dark"},{default:a(()=>[o("周卡")]),_:1})):w("",!0),e.row.TyCar==3?(p(),c(y,{key:3,type:"warning",effect:"dark"},{default:a(()=>[o("月卡")]),_:1})):w("",!0),e.row.TyCar==4?(p(),c(y,{key:4,type:"warning",effect:"dark"},{default:a(()=>[o("季卡")]),_:1})):w("",!0),e.row.TyCar==5?(p(),c(y,{key:5,type:"danger",effect:"dark"},{default:a(()=>[o("半年卡")]),_:1})):w("",!0),e.row.TyCar==6?(p(),c(y,{key:6,type:"danger",effect:"dark"},{default:a(()=>[o("年卡")]),_:1})):w("",!0),e.row.TyCar==7?(p(),c(y,{key:7,type:"danger",effect:"dark"},{default:a(()=>[o("永久卡")]),_:1})):w("",!0)]),_:1}),l(b,{prop:"Price",label:"售价",width:"80",align:"center"},{default:a(e=>[l(y,{type:"danger",effect:"dark"},{default:a(()=>[o(F(e.row.Price)+"￥",1)]),_:2},1024)]),_:1}),l(b,{prop:"Lock",label:"出售锁定",width:"80",align:"center"},{default:a(e=>[e.row.Lock?(p(),c(y,{key:0,type:"danger",effect:"dark"},{default:a(()=>[o("已售锁定")]),_:1})):(p(),c(y,{key:1,type:"success",effect:"dark"},{default:a(()=>[o("可售")]),_:1}))]),_:1}),l(b,{prop:"Bak",label:"备注","min-width":"200",align:"center"}),l(b,{label:"操作 ",fixed:be()?!1:"right",align:"center","min-width":"300"},{default:a(e=>[l(n,{type:"primary",size:"small",onClick:N=>q(e.row.Serial)},{default:a(()=>[o("复制")]),_:2},1032,["onClick"]),l(n,{type:"warning",size:"small",onClick:N=>H(e.row)},{default:a(()=>[o("封卡")]),_:2},1032,["onClick"]),l(n,{type:"success",size:"small",onClick:N=>J(e.row)},{default:a(()=>[o("已售")]),_:2},1032,["onClick"]),l(n,{type:"danger",size:"small",onClick:N=>Q(e.row)},{default:a(()=>[o("删除")]),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["data"]),U("div",Ke,[l(pe,{"current-page":E.value,"onUpdate:currentPage":t[3]||(t[3]=e=>E.value=e),"page-size":x.value,"onUpdate:pageSize":t[4]||(t[4]=e=>x.value=e),"page-sizes":[30,60,100],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:g(C).Data.CarList.CarNum,onSizeChange:K,onCurrentChange:O},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),l(ce,{modelValue:S.value,"onUpdate:modelValue":t[11]||(t[11]=e=>S.value=e),title:A.value,class:"max-w-[500px]",width:"100%",center:""},{default:a(()=>[l(P,null,{default:a(()=>[l(V,{label:"制卡软件"},{default:a(()=>[l(L,{modelValue:r.ExeID,"onUpdate:modelValue":t[5]||(t[5]=e=>r.ExeID=e),class:"w-[150px] ml-[30px]",placeholder:"软件筛选"},{default:a(()=>[(p(!0),D(h,null,I(g(C).Data.ExeList.Exes,e=>(p(),c(v,{key:e.ID,label:e.Title,value:e.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(V,{label:"卡密类型"},{default:a(()=>[l(L,{modelValue:r.TyCar,"onUpdate:modelValue":t[6]||(t[6]=e=>r.TyCar=e),class:"w-[120px] ml-[30px]",placeholder:"卡密筛选"},{default:a(()=>[(p(!0),D(h,null,I(ke,e=>(p(),c(v,{key:e.Title,label:e.Title,value:e.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(V,{label:"制卡数量"},{default:a(()=>[l($,{class:"ml-[30px]",modelValue:r.CarNum,"onUpdate:modelValue":t[7]||(t[7]=e=>r.CarNum=e),min:1,max:500},null,8,["modelValue"])]),_:1}),l(V,{label:"销售价格"},{default:a(()=>[l($,{class:"ml-[30px]",modelValue:r.Price,"onUpdate:modelValue":t[8]||(t[8]=e=>r.Price=e),min:1,max:9999,precision:1},null,8,["modelValue"])]),_:1}),l(V,{label:"卡密前缀"},{default:a(()=>[l(B,{placeholder:"请输入卡密前缀 如 TK-",modelValue:r.Prefix,"onUpdate:modelValue":t[9]||(t[9]=e=>r.Prefix=e)},null,8,["modelValue"])]),_:1}),l(V,{label:"备注信息"},{default:a(()=>[l(B,{placeholder:"请输入备注信息 已便方便搜索",modelValue:r.Bak,"onUpdate:modelValue":t[10]||(t[10]=e=>r.Bak=e),type:"textarea"},null,8,["modelValue"])]),_:1}),U("div",Oe,[l(n,{type:"primary",class:"w-[200px]",onClick:G},{default:a(()=>[o("生成")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{_a as default};
