import{u as K}from"./Data-d03a15d1.js";/* empty css                  *//* empty css                   */import"./el-form-item-4ed993c7.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 *//* empty css                 *//* empty css                  */import{a2 as v,a3 as W,a4 as Y}from"./SDK-ed54f542.js";import{i as Z}from"./Lib-c3124522.js";import{d as $,r as f,x as H,o as J,q as w,b as k,e,w as t,F as B,G as Q,p as X,a as b,f as _,u as x,i as ee,B as V,L as le,E as C,n as ae,k as te,N as oe,t as ne,W as ue,K as se,Y as re,Z as ie,a6 as pe,l as de,c as ce,a5 as me}from"./index-a47683f3.js";import{S as ve}from"./Search-a5d4a230.js";import"./index-8b36aa12.js";import"./index-a7a7dd65.js";const _e={class:"h-[850px] p-[15px]"},fe={class:"mt-[10px] ml-[10px]"},xe={class:"justify-center text-center"},Fe=$({__name:"DevBlack",setup(De){const p=K(),d=f(1),u=f(30);let s=f(u.value*(d.value-1)),r=f(u.value),n=f("");const D=f(!1),o=H({AdminID:"",AgentID:"",Bak:"",DeviceID:"",EndTime:"",ExeID:"",IP:"",_id:""});J(()=>{v(n.value,s.value,r.value)});const y=()=>{s.value=u.value*(d.value-1),r.value=u.value,u.value<=p.Data.BlackList.BlackNum&&v(n.value,s.value,r.value)},h=()=>{s.value=u.value*(d.value-1),r.value=u.value,v(n.value,s.value,r.value)},P=i=>{const a=d.value,c=u.value;return i+1+(a-1)*c},L=i=>{for(let a=0;a<p.Data.ExeList.Exes.length;a++)if(i==p.Data.ExeList.Exes[a].ID)return p.Data.ExeList.Exes[a].Title;return"未知"},S=i=>{W(i),v(n.value,s.value,r.value)},T=()=>{v(n.value,s.value,r.value)},z=()=>{n.value="",d.value=1,u.value=60,s.value=0,r.value=60,v(n.value,s.value,r.value)},U=i=>i.substring(0,19).replace("T"," "),N=()=>{if(o.ExeID==null){C.error("请选择对应的软件");return}if(o.DeviceID==null||o.DeviceID==""){C.error("请输入要添加的设备ID");return}Y(o.ExeID,o.DeviceID,o.IP??"",o.Bak??""),v(n.value,s.value,r.value),D.value=!1};return(i,a)=>{const c=ae,g=te,A=oe,M=ne,E=Q,m=ue,F=se,j=re,G=ie,O=me,R=pe,I=de,q=X;return b(),w(B,null,[k("div",_e,[e(E,{class:"mb-[15px]"},{default:t(()=>[e(M,null,{default:t(()=>[e(A,{wrap:""},{default:t(()=>[e(c,{type:"danger",onClick:a[0]||(a[0]=l=>D.value=!0)},{default:t(()=>[_("添加黑名单")]),_:1}),e(g,{style:{width:"300px"},modelValue:x(n),"onUpdate:modelValue":a[1]||(a[1]=l=>ee(n)?n.value=l:n=l),placeholder:"要查询的设备ID/IP","prefix-icon":x(ve)},null,8,["modelValue","prefix-icon"]),e(c,{type:"primary",onClick:T},{default:t(()=>[_("查询")]),_:1},8,["onClick"]),e(c,{type:"primary",onClick:z},{default:t(()=>[_("重置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(E,null,{default:t(()=>[e(j,{data:x(p).Data.BlackList.BlackList,style:{width:"100%"},stripe:""},{default:t(()=>[e(m,{label:"序号",type:"index",index:P,width:"80",align:"center"}),e(m,{prop:"ExeID",label:"软件名称",width:"150",align:"center"},{default:t(l=>[_(V(L(l.row.ExeID)),1)]),_:1}),e(m,{prop:"DeviceID","show-overflow-tooltip":"true",label:"设备ID",width:"300",align:"center"}),e(m,{prop:"IP","show-overflow-tooltip":"true",label:"设备IP",width:"200",align:"center"}),e(m,{prop:"EndTime","show-overflow-tooltip":"true",label:"封禁时间",width:"200",align:"center"},{default:t(l=>[e(F,{effect:"danger"},{default:t(()=>[_(V(U(l.row.EndTime)),1)]),_:2},1024)]),_:1}),e(m,{prop:"Bak","show-overflow-tooltip":"true",label:"封禁说明",width:"300",align:"center"}),e(m,{label:"操作 ",fixed:Z()?!1:"right",align:"center","min-width":"80"},{default:t(l=>[e(c,{type:"warning",size:"small",onClick:ge=>S(l.row.DeviceID)},{default:t(()=>[_("删除")]),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["data"]),k("div",fe,[e(G,{"current-page":d.value,"onUpdate:currentPage":a[2]||(a[2]=l=>d.value=l),"page-size":u.value,"onUpdate:pageSize":a[3]||(a[3]=l=>u.value=l),"page-sizes":[30,60,100],small:!1,disabled:!1,background:!0,"prev-text":"上一页","next-text":"下一页","popper-class":"页",layout:"total, sizes, prev, pager, next,jumper,slot",total:x(p).Data.BlackList.BlackNum,onSizeChange:y,onCurrentChange:h},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),e(q,{title:"添加黑名单",modelValue:D.value,"onUpdate:modelValue":a[8]||(a[8]=l=>D.value=l),width:"100%",class:"max-w-[450px]",center:"",draggable:"true"},{default:t(()=>[e(E,null,{default:t(()=>[e(I,{label:"黑名单软件"},{default:t(()=>[e(R,{modelValue:o.ExeID,"onUpdate:modelValue":a[4]||(a[4]=l=>o.ExeID=l),class:"w-[150px] ml-[30px]",placeholder:"软件筛选"},{default:t(()=>[(b(!0),w(B,null,le(x(p).Data.ExeList.Exes,l=>(b(),ce(O,{key:l.ID,label:l.Title,value:l.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(I,{label:"设备ID"},{default:t(()=>[e(g,{placeholder:"请输入设备ID",modelValue:o.DeviceID,"onUpdate:modelValue":a[5]||(a[5]=l=>o.DeviceID=l)},null,8,["modelValue"])]),_:1}),e(I,{label:"IP地址"},{default:t(()=>[e(g,{placeholder:"请输入IP地址",modelValue:o.IP,"onUpdate:modelValue":a[6]||(a[6]=l=>o.IP=l)},null,8,["modelValue"])]),_:1}),e(I,{label:"封禁说明"},{default:t(()=>[e(g,{placeholder:"请输入封禁说明",modelValue:o.Bak,"onUpdate:modelValue":a[7]||(a[7]=l=>o.Bak=l),type:"textarea"},null,8,["modelValue"])]),_:1}),k("div",xe,[e(c,{type:"danger",class:"w-[200px]",onClick:N},{default:t(()=>[_("添加")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Fe as default};
